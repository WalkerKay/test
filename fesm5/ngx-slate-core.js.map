{"version":3,"file":"ngx-slate-core.js.map","sources":["ng://@ngx-slate/core/constants/event-handlers.ts","ng://@ngx-slate/core/plugins/angular/editor-props.ts","ng://@ngx-slate/core/constants/transfer-types.ts","ng://@ngx-slate/core/utils/remove-all-ranges.ts","ng://@ngx-slate/core/constants/data-attributes.ts","ng://@ngx-slate/core/constants/selectors.ts","ng://@ngx-slate/core/utils/clone-fragment.ts","ng://@ngx-slate/core/utils/get-event-transfer.ts","ng://@ngx-slate/core/utils/set-event-transfer.ts","ng://@ngx-slate/core/plugins/dom/after.ts","ng://@ngx-slate/core/plugins/dom/before.ts","ng://@ngx-slate/core/plugins/dom/index.ts","ng://@ngx-slate/core/plugins/angular/commands.ts","ng://@ngx-slate/core/plugins/angular/queries.ts","ng://@ngx-slate/core/plugins/angular/index.ts","ng://@ngx-slate/core/utils/scroll-to-selection.ts","ng://@ngx-slate/core/shared/ExecutionEnvironment.ts","ng://@ngx-slate/core/plugins/custom-event/DOMTopLevelEventTypes.ts","ng://@ngx-slate/core/plugins/custom-event/FallbackCompositionState.ts","ng://@ngx-slate/core/plugins/custom-event/before-input-event.ts","ng://@ngx-slate/core/plugins/custom-event/BeforeInputEventPlugin.ts","ng://@ngx-slate/core/core/render-plugin/render-config.ts","ng://@ngx-slate/core/core/child-node-base.ts","ng://@ngx-slate/core/utils/attributes.ts","ng://@ngx-slate/core/components/void/void.component.ts","ng://@ngx-slate/core/core/render-plugin/plugin-render-service.ts","ng://@ngx-slate/core/components/node/node.component.ts","ng://@ngx-slate/core/core/event-service.ts","ng://@ngx-slate/core/components/content/content.component.ts","ng://@ngx-slate/core/plugins/angular/rendering.ts","ng://@ngx-slate/core/components/editor/editor.component.ts","ng://@ngx-slate/core/utils/offset-key.ts","ng://@ngx-slate/core/components/text/text.component.ts","ng://@ngx-slate/core/editor.module.ts","ng://@ngx-slate/core/core/value-change.ts","ng://@ngx-slate/core/core/render-plugin/plugin-component-base.ts","ng://@ngx-slate/core/utils/find-dom-node.ts","ng://@ngx-slate/core/public-api.ts","ng://@ngx-slate/core/ngx-slate-core.ts"],"sourcesContent":["const EVENT_HANDLERS = [\n    'onBeforeInput',\n    'onBlur',\n    'onClick',\n    'onContextMenu',\n    'onCompositionEnd',\n    'onCompositionStart',\n    'onCopy',\n    'onCut',\n    'onDragEnd',\n    'onDragEnter',\n    'onDragExit',\n    'onDragLeave',\n    'onDragOver',\n    'onDragStart',\n    'onDrop',\n    'onInput',\n    'onFocus',\n    'onKeyDown',\n    'onKeyUp',\n    'onMouseDown',\n    'onMouseUp',\n    'onPaste',\n    'onSelect'\n];\n\nexport class NgxSlateEvent {\n    name: string;\n    handler: string;\n    isTriggerBeforeInput: boolean;\n}\n\nexport const NGX_SLATE_EVENTS: NgxSlateEvent[] = [\n    { name: 'blur', handler: 'onBlur', isTriggerBeforeInput: true },\n    { name: 'compositionstart', handler: 'onCompositionStart', isTriggerBeforeInput: true },\n    { name: 'compositionupdate', handler: null, isTriggerBeforeInput: true },\n    { name: 'compositionend', handler: 'onCompositionEnd', isTriggerBeforeInput: true },\n    { name: 'keydown', handler: 'onKeyDown', isTriggerBeforeInput: true },\n    { name: 'keypress', handler: null, isTriggerBeforeInput: true },\n    { name: 'keyup', handler: 'onKeyUp', isTriggerBeforeInput: true },\n    { name: 'mousedown', handler: 'onMouseDown', isTriggerBeforeInput: true },\n    { name: 'textInput', handler: null, isTriggerBeforeInput: true },\n    { name: 'paste', handler: 'onPaste', isTriggerBeforeInput: true },\n    { name: 'click', handler: 'onClick', isTriggerBeforeInput: false },\n    { name: 'contextmenu', handler: 'onContextMenu', isTriggerBeforeInput: false },\n    { name: 'copy', handler: 'onCopy', isTriggerBeforeInput: false },\n    { name: 'cut', handler: 'onCut', isTriggerBeforeInput: false },\n    // { name: 'input', handler: 'onInput', isTriggerBeforeInput: false },\n    { name: 'focus', handler: 'onFocus', isTriggerBeforeInput: false },\n    { name: 'cut', handler: 'onCut', isTriggerBeforeInput: false },\n    { name: 'mouseup', handler: 'onMouseUp', isTriggerBeforeInput: false },\n    { name: 'select', handler: 'onSelect', isTriggerBeforeInput: false },\n    { name: 'drop', handler: 'onDrop', isTriggerBeforeInput: false }\n];\n/**\n * Export.\n *\n * @type {Array}\n */\n\nexport default EVENT_HANDLERS;\n","import EVENT_HANDLERS from '../../constants/event-handlers';\n\nconst PROPS = [\n    ...EVENT_HANDLERS,\n    'commands',\n    'decorateNode',\n    'queries',\n    'renderAnnotation',\n    'renderBlock',\n    'renderDecoration',\n    'renderDocument',\n    'renderEditor',\n    'renderInline',\n    'renderMark',\n    'schema'\n];\n\nfunction EditorPropsPlugin(options = {}) {\n    const plugin = PROPS.reduce((memo, prop) => {\n        if (prop in options) {\n            if (options[prop]) {\n                memo[prop] = options[prop];\n            }\n        }\n        return memo;\n    }, {});\n\n    return plugin;\n}\n\nexport default EditorPropsPlugin;\n","export default {\n    FRAGMENT: 'application/x-slate-fragment',\n    HTML: 'text/html',\n    NODE: 'application/x-slate-node',\n    RICH: 'text/rtf',\n    TEXT: 'text/plain'\n};\n","import { IS_IE } from 'slate-dev-environment';\n\n/**\n * Cross-browser remove all ranges from a `domSelection`.\n *\n * @param {Selection} domSelection\n */\n\nfunction removeAllRanges(domSelection) {\n    // COMPAT: In IE 11, if the selection contains nested tables, then\n    // `removeAllRanges` will throw an error.\n    if (IS_IE) {\n        const range = (window.document.body as any).createTextRange();\n        range.collapse();\n        range.select();\n    } else {\n        domSelection.removeAllRanges();\n    }\n}\n\n/**\n * Export.\n *\n * @type {Function}\n */\n\nexport default removeAllRanges;\n","export default {\n    EDITOR: 'data-slate-editor',\n    FRAGMENT: 'data-slate-fragment',\n    KEY: 'data-key',\n    LEAF: 'data-slate-leaf',\n    LENGTH: 'data-slate-length',\n    OBJECT: 'data-slate-object',\n    OFFSET_KEY: 'data-offset-key',\n    SPACER: 'data-slate-spacer',\n    STRING: 'data-slate-string',\n    TEXT: 'data-slate-object',\n    VOID: 'data-slate-void',\n    ZERO_WIDTH: 'data-slate-zero-width',\n    SKIP_EVENT: 'skip-slate-event'\n};\n","import DATA_ATTRS from './data-attributes';\n\nexport default {\n    BLOCK: `[${DATA_ATTRS.OBJECT}=\"block\"]`,\n    EDITOR: `[${DATA_ATTRS.EDITOR}]`,\n    INLINE: `[${DATA_ATTRS.OBJECT}=\"inline\"]`,\n    KEY: `[${DATA_ATTRS.KEY}]`,\n    LEAF: `[${DATA_ATTRS.LEAF}]`,\n    OBJECT: `[${DATA_ATTRS.OBJECT}]`,\n    STRING: `[${DATA_ATTRS.STRING}]`,\n    TEXT: `[${DATA_ATTRS.OBJECT}=\"text\"]`,\n    VOID: `[${DATA_ATTRS.VOID}]`,\n    ZERO_WIDTH: `[${DATA_ATTRS.ZERO_WIDTH}]`,\n    SKIP_EVENT: `[${DATA_ATTRS.SKIP_EVENT}]`\n};\n","import Base64 from 'slate-base64-serializer';\nimport Plain from 'slate-plain-serializer';\nimport getWindow from 'get-window';\nimport { IS_IE } from 'slate-dev-environment';\nimport { Value } from 'slate';\n\nimport TRANSFER_TYPES from '../constants/transfer-types';\nimport removeAllRanges from './remove-all-ranges';\nimport findDOMNode from './find-dom-node';\nimport DATA_ATTRS from '../constants/data-attributes';\nimport SELECTORS from '../constants/selectors';\n\nconst { FRAGMENT, HTML, TEXT } = TRANSFER_TYPES;\n\nfunction cloneFragment(event, editor, callback = () => undefined) {\n\n    const window = getWindow(event.target);\n    const native = window.getSelection();\n    const { value } = editor;\n    const { document, fragment, selection } = value;\n    const { start, end } = selection;\n    const startVoid = document.getClosestVoid(start.path, editor);\n    const endVoid = document.getClosestVoid(end.path, editor);\n\n    // If the selection is collapsed, and it isn't inside a void node, abort.\n    if (native.isCollapsed && !startVoid) {\n        return;\n    }\n\n    // Create a fake selection so that we can add a Base64-encoded copy of the\n    // fragment to the HTML, to decode on future pastes.\n    const encoded = Base64.serializeNode(fragment);\n    const range = native.getRangeAt(0);\n    let contents = range.cloneContents();\n    let attach = contents.childNodes[0];\n\n    // Make sure attach is a non-empty node, since empty nodes will not get copied\n    contents.childNodes.forEach(node => {\n        if (node.textContent && node.textContent.trim() !== '') {\n            attach = node;\n        }\n    });\n\n    // COMPAT: If the end node is a void node, we need to move the end of the\n    // range from the void node's spacer span, to the end of the void node's\n    // content, since the spacer is before void's content in the DOM.\n    if (endVoid) {\n        const r = range.cloneRange();\n        const node = editor.findDOMNode(document.getPath(endVoid));\n        r.setEndAfter(node);\n        contents = r.cloneContents();\n    }\n\n    // COMPAT: If the start node is a void node, we need to attach the encoded\n    // fragment to the void node's content node instead of the spacer, because\n    // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n    // most browsers. (2018/04/27)\n    if (startVoid) {\n        attach = contents.childNodes[0].childNodes[1].firstChild;\n    }\n\n    // Remove any zero-width space spans from the cloned DOM so that they don't\n    // show up elsewhere when pasted.\n    [].slice.call(contents.querySelectorAll(SELECTORS.ZERO_WIDTH)).forEach(zw => {\n        const isNewline = zw.getAttribute(DATA_ATTRS.ZERO_WIDTH) === 'n';\n        zw.textContent = isNewline ? '\\n' : '';\n    });\n\n    // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n    // in the HTML, and can be used for intra-Slate pasting. If it's a text\n    // node, wrap it in a `<span>` so we have something to set an attribute on.\n    if (attach.nodeType === 3) {\n        const span = window.document.createElement('span');\n\n        // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n        // then leading and trailing spaces will be ignored. (2017/09/21)\n        span.style.whiteSpace = 'pre';\n\n        span.appendChild(attach);\n        contents.appendChild(span);\n        attach = span;\n    }\n\n    attach.setAttribute(DATA_ATTRS.FRAGMENT, encoded);\n\n    //  Creates value from only the selected blocks\n    //  Then gets plaintext for clipboard with proper linebreaks for BLOCK elements\n    //  Via Plain serializer\n    const valFromSelection = Value.create({ document: fragment });\n    const plainText = Plain.serialize(valFromSelection);\n\n    // Add the phony content to a div element. This is needed to copy the\n    // contents into the html clipboard register.\n    const div = window.document.createElement('div');\n    div.appendChild(contents);\n\n    // For browsers supporting it, we set the clipboard registers manually,\n    // since the result is more predictable.\n    // COMPAT: IE supports the setData method, but only in restricted sense.\n    // IE doesn't support arbitrary MIME types or common ones like 'text/plain';\n    // it only accepts \"Text\" (which gets mapped to 'text/plain') and \"Url\"\n    // (mapped to 'text/url-list'); so, we should only enter block if !IS_IE\n    if (event.clipboardData && event.clipboardData.setData && !IS_IE) {\n        event.preventDefault();\n        event.clipboardData.setData(TEXT, plainText);\n        event.clipboardData.setData(FRAGMENT, encoded);\n        event.clipboardData.setData(HTML, div.innerHTML);\n        callback();\n        return;\n    }\n\n    // COMPAT: For browser that don't support the Clipboard API's setData method,\n    // we must rely on the browser to natively copy what's selected.\n    // So we add the div (containing our content) to the DOM, and select it.\n    const editorEl = event.target.closest(SELECTORS.EDITOR);\n    div.setAttribute('contenteditable', true);\n    div.style.position = 'absolute';\n    div.style.left = '-9999px';\n    editorEl.appendChild(div);\n    native.selectAllChildren(div);\n\n    // Revert to the previous selection right after copying.\n    window.requestAnimationFrame(() => {\n        editorEl.removeChild(div);\n        removeAllRanges(native);\n        native.addRange(range);\n        callback();\n    });\n}\n\nexport default cloneFragment;\n","import Base64 from 'slate-base64-serializer';\nimport { IS_IE } from 'slate-dev-environment';\n\nimport TRANSFER_TYPES from '../constants/transfer-types';\nimport DATA_ATTRS from '../constants/data-attributes';\n\n/**\n * Transfer types.\n *\n * @type {String}\n */\n\nconst { FRAGMENT, HTML, NODE, RICH, TEXT } = TRANSFER_TYPES;\n\n/**\n * Fragment matching regexp for HTML nodes.\n *\n * @type {RegExp}\n */\n\nconst FRAGMENT_MATCHER = / data-slate-fragment=\"([^\\s\"]+)\"/;\n\n/**\n * Get the transfer data from an `event`.\n *\n * @param {Event} event\n * @return {Object}\n */\n\nfunction getEventTransfer(event) {\n    // COMPAT: IE 11 doesn't populate nativeEvent with either\n    // dataTransfer or clipboardData. We'll need to use the base event\n    // object (2018/14/6)\n    if (!IS_IE && event.nativeEvent) {\n        event = event.nativeEvent;\n    }\n\n    const transfer = event.dataTransfer || event.clipboardData;\n    let fragment = getType(transfer, FRAGMENT);\n    let node = getType(transfer, NODE);\n    const html = getType(transfer, HTML);\n    const rich = getType(transfer, RICH);\n    let text = getType(transfer, TEXT);\n    let files;\n\n    // If there isn't a fragment, but there is HTML, check to see if the HTML is\n    // actually an encoded fragment.\n    // tslint:disable-next-line:no-bitwise\n    if (!fragment && html && ~html.indexOf(` ${DATA_ATTRS.FRAGMENT}=\"`)) {\n        const matches = FRAGMENT_MATCHER.exec(html);\n        const [full, encoded] = matches; // eslint-disable-line no-unused-vars\n        if (encoded) {\n            fragment = encoded;\n        }\n    }\n\n    // COMPAT: Edge doesn't handle custom data types\n    // These will be embedded in text/plain in this case (2017/7/12)\n    if (text) {\n        const embeddedTypes = getEmbeddedTypes(text);\n\n        if (embeddedTypes[FRAGMENT]) {\n            fragment = embeddedTypes[FRAGMENT];\n        }\n        if (embeddedTypes[NODE]) {\n            node = embeddedTypes[NODE];\n        }\n        if (embeddedTypes[TEXT]) {\n            text = embeddedTypes[TEXT];\n        }\n    }\n\n    // Decode a fragment or node if they exist.\n    if (fragment) {\n        fragment = Base64.deserializeNode(fragment);\n    }\n    if (node) {\n        node = Base64.deserializeNode(node);\n    }\n\n    // COMPAT: Edge sometimes throws 'NotSupportedError'\n    // when accessing `transfer.items` (2017/7/12)\n    try {\n        // Get and normalize files if they exist.\n        if (transfer.items && transfer.items.length) {\n            files = Array.from(transfer.items)\n                .map((item: any) => (item.kind === 'file' ? item.getAsFile() : null))\n                .filter(exists => exists);\n        } else if (transfer.files && transfer.files.length) {\n            files = Array.from(transfer.files);\n        }\n    } catch (err) {\n        if (transfer.files && transfer.files.length) {\n            files = Array.from(transfer.files);\n        }\n    }\n\n    // Determine the type of the data.\n    const data: any = { files, fragment, html, node, rich, text };\n    data.type = getTransferType(data);\n    return data;\n}\n\n/**\n * Takes text input, checks whether contains embedded data\n * and returns object with original text +/- additional data\n *\n * @param {String} text\n * @return {Object}\n */\n\nfunction getEmbeddedTypes(text) {\n    const prefix = 'SLATE-DATA-EMBED::';\n\n    if (text.substring(0, prefix.length) !== prefix) {\n        return { TEXT: text };\n    }\n\n    // Attempt to parse, if fails then just standard text/plain\n    // Otherwise, already had data embedded\n    try {\n        return JSON.parse(text.substring(prefix.length));\n    } catch (err) {\n        throw new Error('Unable to parse custom Slate drag event data.');\n    }\n}\n\n/**\n * Get the type of a transfer from its `data`.\n *\n * @param {Object} data\n * @return {String}\n */\n\nfunction getTransferType(data) {\n    if (data.fragment) return 'fragment';\n    if (data.node) return 'node';\n\n    // COMPAT: Microsoft Word adds an image of the selected text to the data.\n    // Since files are preferred over HTML or text, this would cause the type to\n    // be considered `files`. But it also adds rich text data so we can check\n    // for that and properly set the type to `html` or `text`. (2016/11/21)\n    if (data.rich && data.html) return 'html';\n    if (data.rich && data.text) return 'text';\n\n    if (data.files && data.files.length) return 'files';\n    if (data.html) return 'html';\n    if (data.text) return 'text';\n    return 'unknown';\n}\n\n/**\n * Get one of types `TYPES.FRAGMENT`, `TYPES.NODE`, `text/html`, `text/rtf` or\n * `text/plain` from transfers's `data` if possible, otherwise return null.\n *\n * @param {Object} transfer\n * @param {String} type\n * @return {String}\n */\n\nfunction getType(transfer, type) {\n    if (!transfer.types || !transfer.types.length) {\n        // COMPAT: In IE 11, there is no `types` field but `getData('Text')`\n        // is supported`. (2017/06/23)\n        return type === TEXT ? transfer.getData('Text') || null : null;\n    }\n\n    // COMPAT: In Edge, transfer.types doesn't respond to `indexOf`. (2017/10/25)\n    const types = Array.from(transfer.types);\n\n    return types.indexOf(type) !== -1 ? transfer.getData(type) || null : null;\n}\n\n/**\n * Export.\n *\n * @type {Function}\n */\n\nexport default getEventTransfer;\n","import TRANSFER_TYPES from '../constants/transfer-types';\n\n/**\n * The default plain text transfer type.\n *\n * @type {String}\n */\n\nconst { TEXT } = TRANSFER_TYPES;\n\n/**\n * Set data with `type` and `content` on an `event`.\n *\n * COMPAT: In Edge, custom types throw errors, so embed all non-standard\n * types in text/plain compound object. (2017/7/12)\n *\n * @param {Event} event\n * @param {String} type\n * @param {String} content\n */\n\nfunction setEventTransfer(event, type, content) {\n    const mime = TRANSFER_TYPES[type.toUpperCase()];\n\n    if (!mime) {\n        throw new Error(`Cannot set unknown transfer type \"${mime}\".`);\n    }\n\n    if (event.nativeEvent) {\n        event = event.nativeEvent;\n    }\n\n    const transfer = event.dataTransfer || event.clipboardData;\n\n    try {\n        transfer.setData(mime, content);\n        // COMPAT: Safari needs to have the 'text' (and not 'text/plain') value in dataTransfer\n        // to display the cursor while dragging internally.\n        transfer.setData('text', transfer.getData('text'));\n    } catch (err) {\n        const prefix = 'SLATE-DATA-EMBED::';\n        const text = transfer.getData(TEXT);\n        let obj = {};\n\n        // If the existing plain text data is prefixed, it's Slate JSON data.\n        if (text.substring(0, prefix.length) === prefix) {\n            try {\n                obj = JSON.parse(text.substring(prefix.length));\n            } catch (e) {\n                throw new Error(\n                    'Failed to parse Slate data from `DataTransfer` object.'\n                );\n            }\n        } else {\n            // Otherwise, it's just set it as is.\n            obj[TEXT] = text;\n        }\n\n        obj[mime] = content;\n        const stringData = `${prefix}${JSON.stringify(obj)}`;\n        transfer.setData(TEXT, stringData);\n    }\n}\n\n/**\n * Export.\n *\n * @type {Function}\n */\n\nexport default setEventTransfer;\n","import Base64 from 'slate-base64-serializer';\nimport Debug from 'debug';\nimport Hotkeys from 'slate-hotkeys';\nimport Plain from 'slate-plain-serializer';\nimport getWindow from 'get-window';\nimport { IS_IOS, IS_IE, IS_EDGE } from 'slate-dev-environment';\n\nimport cloneFragment from '../../utils/clone-fragment';\nimport getEventTransfer from '../../utils/get-event-transfer';\nimport setEventTransfer from '../../utils/set-event-transfer';\nimport { TAB } from '@angular/cdk/keycodes';\nconst TAB_SPACE = '    ';\n\n/**\n * Debug.\n *\n * @type {Function}\n */\n\nconst debug = Debug('slate:after');\n\ndebug.beforeInput = Debug('slate:after-before-input');\n\nclass AfterPlugin {\n    static isDraggingInternally = null;\n    static isMouseDown = false;\n\n    /**\n     * On before input.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onBeforeInput(event, editor, next) {\n        const { value } = editor;\n        const isSynthetic = !!event.nativeEvent;\n\n        // let mustPreventNative = false;\n        // const globalThis = window;\n        // const nativeSelection = window.getSelection();\n        // if (!mustPreventNative) {\n        //     if (\n        //         nativeSelection.anchorNode &&\n        //         nativeSelection.anchorNode.nodeType === Node.TEXT_NODE\n        //     ) {\n        //         const parentNode = nativeSelection.anchorNode.parentNode;\n        //         mustPreventNative =\n        //             parentNode.nodeName === 'SPAN' &&\n        //             parentNode.firstChild.nodeType === Node.TEXT_NODE &&\n        //             !editor.value.anchorText.text &&\n        //             !editor.value.endText.text;\n        //     } else {\n        //         mustPreventNative = true;\n        //     }\n        // }\n        // If the event is synthetic, it's React's polyfill of `beforeinput` that\n        // isn't a true `beforeinput` event with meaningful information. It only\n        // gets triggered for character insertions, so we can just insert directly.\n        if (isSynthetic) {\n            debug.beforeInput('onBeforeInput', { event });\n            // cancel preventDefault, prevent emit native selectionchange to move focus next component\n            if (editor.value.anchorText.text === '') {\n                setTimeout(() => {\n                    editor.insertText(event.data);\n                });\n                return next();\n            }\n            event.nativeEvent.preventDefault();\n            editor.insertText(event.data);\n            // if (mustPreventNative) {\n            //     event.nativeEvent.preventDefault();\n            //     editor.insertText(event.data);\n            // } else {\n            //     // setImmediate(() => {\n            //     //     editor.insertText(event.data);\n            //     // });\n            // }\n            return next();\n        }\n\n        // Otherwise, we can use the information in the `beforeinput` event to\n        // figure out the exact change that will occur, and prevent it.\n        const [targetRange] = event.getTargetRanges();\n        if (!targetRange) {\n            return next();\n        }\n\n        debug('onBeforeInput', { event });\n\n        event.preventDefault();\n\n        const { document, selection } = value;\n        const range = editor.findRange(targetRange);\n\n        switch (event.inputType) {\n            case 'deleteByDrag':\n            case 'deleteByCut':\n            case 'deleteContent':\n            case 'deleteContentBackward':\n            case 'deleteContentForward': {\n                editor.deleteAtRange(range);\n                break;\n            }\n\n            case 'deleteWordBackward': {\n                editor.deleteWordBackwardAtRange(range);\n                break;\n            }\n\n            case 'deleteWordForward': {\n                editor.deleteWordForwardAtRange(range);\n                break;\n            }\n\n            case 'deleteSoftLineBackward':\n            case 'deleteHardLineBackward': {\n                editor.deleteLineBackwardAtRange(range);\n                break;\n            }\n\n            case 'deleteSoftLineForward':\n            case 'deleteHardLineForward': {\n                editor.deleteLineForwardAtRange(range);\n                break;\n            }\n\n            case 'insertLineBreak':\n            case 'insertParagraph': {\n                const hasVoidParent = document.hasVoidParent(\n                    selection.start.path,\n                    editor\n                );\n\n                if (hasVoidParent) {\n                    editor.moveToStartOfNextText();\n                } else {\n                    editor.splitBlockAtRange(range);\n                }\n\n                break;\n            }\n\n            case 'insertFromYank':\n            case 'insertReplacementText':\n            case 'insertText': {\n                // COMPAT: `data` should have the text for the `insertText` input type\n                // and `dataTransfer` should have the text for the\n                // `insertReplacementText` input type, but Safari uses `insertText` for\n                // spell check replacements and sets `data` to `null`. (2018/08/09)\n                const text =\n                    event.data == null\n                        ? event.dataTransfer.getData('text/plain')\n                        : event.data;\n\n                if (text == null) {\n                    break;\n                }\n\n                editor.insertTextAtRange(range, text, selection.marks);\n\n                // If the text was successfully inserted, and the selection had marks\n                // on it, unset the selection's marks.\n                if (\n                    selection.marks &&\n                    value.document !== editor.value.document\n                ) {\n                    editor.select({ marks: null });\n                }\n\n                break;\n            }\n        }\n\n        next();\n    }\n\n    /**\n     * On blur.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onBlur(event, editor, next) {\n        debug('onBlur', { event });\n        editor.blur();\n        next();\n    }\n\n    /**\n     * On click.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onClick(event, editor, next) {\n        if (editor.readOnly) return next();\n\n        const { value } = editor;\n        const { document } = value;\n        const path = editor.findPath(event.target);\n        if (!path) return next();\n\n        debug('onClick', { event });\n\n        const node = document.getNode(path);\n        const ancestors = document.getAncestors(path);\n        const isVoid =\n            node &&\n            (editor.isVoid(node) || ancestors.some(a => editor.isVoid(a)));\n\n        if (isVoid) {\n            // COMPAT: In Chrome & Safari, selections that are at the zero offset of\n            // an inline node will be automatically replaced to be at the last offset\n            // of a previous inline node, which screws us up, so we always want to set\n            // it to the end of the node. (2016/11/29)\n            editor.focus().moveToEndOfNode(node);\n        }\n\n        next();\n    }\n\n    /**\n     * On copy.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onCopy(event, editor, next) {\n        debug('onCopy', { event });\n        cloneFragment(event, editor);\n        next();\n    }\n\n    /**\n     * On cut.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onCut(event, editor, next) {\n        debug('onCut', { event });\n\n        // Once the fake cut content has successfully been added to the clipboard,\n        // delete the content in the current selection.\n        cloneFragment(event, editor, () => {\n            // If user cuts a void block node or a void inline node,\n            // manually removes it since selection is collapsed in this case.\n            const { value } = editor;\n            const { document, selection } = value;\n            const { end, isCollapsed } = selection;\n            let voidPath;\n\n            if (isCollapsed) {\n                for (const [node, path] of document.ancestors(end.path)) {\n                    if (editor.isVoid(node)) {\n                        voidPath = path;\n                        break;\n                    }\n                }\n            }\n\n            if (voidPath) {\n                editor.removeNodeByKey(voidPath);\n            } else {\n                editor.delete();\n            }\n        });\n\n        next();\n    }\n\n    /**\n     * On drag end.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onDragEnd(event, editor, next) {\n        debug('onDragEnd', { event });\n        AfterPlugin.isDraggingInternally = null;\n        next();\n    }\n\n    /**\n     * On drag start.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onDragStart(event, editor, next) {\n        debug('onDragStart', { event });\n\n        AfterPlugin.isDraggingInternally = true;\n\n        const { value } = editor;\n        const { document } = value;\n        const path = editor.findPath(event.target);\n        const node = document.getNode(path);\n        const ancestors = document.getAncestors(path);\n        const isVoid =\n            node &&\n            (editor.isVoid(node) || ancestors.some(a => editor.isVoid(a)));\n        const selectionIncludesNode = value.blocks.some(\n            block => block === node\n        );\n\n        // If a void block is dragged and is not selected, select it (necessary for local drags).\n        if (isVoid && !selectionIncludesNode) {\n            editor.moveToRangeOfNode(node);\n        }\n\n        const fragment = editor.value.fragment;\n        const encoded = Base64.serializeNode(fragment);\n        setEventTransfer(event, 'fragment', encoded);\n        next();\n    }\n\n    /**\n     * On drop.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onDrop(event, editor, next) {\n        const { value } = editor;\n        const { document, selection } = value;\n        const window = getWindow(event.target);\n        let target = editor.findEventRange(event);\n\n        if (!target) {\n            return next();\n        }\n\n        debug('onDrop', { event });\n\n        const transfer = getEventTransfer(event);\n        const { type, fragment, text } = transfer;\n\n        editor.focus();\n\n        // If the drag is internal and the target is after the selection, it\n        // needs to account for the selection's content being deleted.\n        if (\n            AfterPlugin.isDraggingInternally &&\n            selection.end.offset < target.end.offset &&\n            selection.end.path.equals(target.end.path)\n        ) {\n            target = target.moveForward(\n                selection.start.path.equals(selection.end.path)\n                    ? 0 - selection.end.offset + selection.start.offset\n                    : 0 - selection.end.offset\n            );\n        }\n\n        if (AfterPlugin.isDraggingInternally) {\n            editor.delete();\n        }\n\n        editor.select(target);\n\n        if (type === 'text' || type === 'html') {\n            const { anchor } = target;\n            let hasVoidParent = document.hasVoidParent(anchor.path, editor);\n\n            if (hasVoidParent) {\n                let p = anchor.path;\n                let n = document.getNode(anchor.path);\n\n                while (hasVoidParent) {\n                    const [nxt] = document.texts({ path: p });\n\n                    if (!nxt) {\n                        break;\n                    }\n\n                    [n, p] = nxt;\n                    hasVoidParent = document.hasVoidParent(p, editor);\n                }\n\n                if (n) editor.moveToStartOfNode(n);\n            }\n\n            if (text) {\n                text.split('\\n').forEach((line, i) => {\n                    if (i > 0) editor.splitBlock();\n                    editor.insertText(line);\n                });\n            }\n        }\n\n        if (type === 'fragment') {\n            editor.insertFragment(fragment);\n        }\n\n        // COMPAT: React's onSelect event breaks after an onDrop event\n        // has fired in a node: https://github.com/facebook/react/issues/11379.\n        // Until this is fixed in React, we dispatch a mouseup event on that\n        // DOM node, since that will make it go back to normal.\n        const el = editor.findDOMNode(target.focus.path);\n\n        if (el) {\n            el.dispatchEvent(\n                new MouseEvent('mouseup', {\n                    view: window,\n                    bubbles: true,\n                    cancelable: true\n                })\n            );\n        }\n\n        next();\n    }\n\n    /**\n     * On focus.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onFocus(event, editor, next) {\n        debug('onFocus', { event });\n\n        // COMPAT: If the focus event is a mouse-based one, it will be shortly\n        // followed by a `selectionchange`, so we need to deselect here to prevent\n        // the old selection from being set by the `updateSelection` of `<Content>`,\n        // preventing the `selectionchange` from firing. (2018/11/07)\n        if (AfterPlugin.isMouseDown && !IS_IE && !IS_EDGE) {\n            editor.deselect().focus();\n        } else {\n            editor.focus();\n        }\n\n        next();\n    }\n\n    /**\n     * On input.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onInput(event, editor, next) {\n        debug('onInput');\n\n        const window = getWindow(event.target);\n        const domSelection = window.getSelection();\n        const selection = editor.findSelection(domSelection);\n\n        if (selection) {\n            editor.select(selection);\n        } else {\n            editor.blur();\n        }\n\n        const { anchorNode } = domSelection;\n        editor.reconcileDOMNode(anchorNode);\n\n        next();\n    }\n\n    /**\n     * On key down.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onKeyDown(event, editor, next) {\n        debug('onKeyDown', { event });\n\n        const { value } = editor;\n        const { document, selection } = value;\n        const { start } = selection;\n        const hasVoidParent = document.hasVoidParent(start.path, editor);\n\n        // COMPAT: In iOS, some of these hotkeys are handled in the\n        // `onNativeBeforeInput` handler of the `<Content>` component in order to\n        // preserve native autocorrect behavior, so they shouldn't be handled here.\n        if (Hotkeys.isSplitBlock(event) && !IS_IOS) {\n            return hasVoidParent\n                ? editor.moveToStartOfNextText()\n                : editor.splitBlock();\n        }\n\n        if (Hotkeys.isDeleteBackward(event) && !IS_IOS) {\n            return editor.deleteCharBackward();\n        }\n\n        if (Hotkeys.isDeleteForward(event) && !IS_IOS) {\n            return editor.deleteCharForward();\n        }\n\n        if (Hotkeys.isDeleteLineBackward(event)) {\n            return editor.deleteLineBackward();\n        }\n\n        if (Hotkeys.isDeleteLineForward(event)) {\n            return editor.deleteLineForward();\n        }\n\n        if (Hotkeys.isDeleteWordBackward(event)) {\n            return editor.deleteWordBackward();\n        }\n\n        if (Hotkeys.isDeleteWordForward(event)) {\n            return editor.deleteWordForward();\n        }\n\n        if (Hotkeys.isRedo(event)) {\n            return editor.redo();\n        }\n\n        if (Hotkeys.isUndo(event)) {\n            return editor.undo();\n        }\n\n        // COMPAT: Certain browsers don't handle the selection updates properly. In\n        // Chrome, the selection isn't properly extended. And in Firefox, the\n        // selection isn't properly collapsed. (2017/10/17)\n        if (Hotkeys.isMoveLineBackward(event)) {\n            event.preventDefault();\n            return editor.moveToStartOfBlock();\n        }\n\n        if (Hotkeys.isMoveLineForward(event)) {\n            event.preventDefault();\n            return editor.moveToEndOfBlock();\n        }\n\n        if (Hotkeys.isExtendLineBackward(event)) {\n            event.preventDefault();\n            return editor.moveFocusToStartOfBlock();\n        }\n\n        if (Hotkeys.isExtendLineForward(event)) {\n            event.preventDefault();\n            return editor.moveFocusToEndOfBlock();\n        }\n\n        // COMPAT: If a void node is selected, or a zero-width text node adjacent to\n        // an inline is selected, we need to handle these hotkeys manually because\n        // browsers won't know what to do.\n        if (Hotkeys.isMoveBackward(event)) {\n            event.preventDefault();\n\n            if (!selection.isCollapsed) {\n                return editor.moveToStart();\n            }\n\n            return editor.moveBackward();\n        }\n\n        if (Hotkeys.isMoveForward(event)) {\n            event.preventDefault();\n\n            if (!selection.isCollapsed) {\n                return editor.moveToEnd();\n            }\n\n            return editor.moveForward();\n        }\n\n        if (Hotkeys.isMoveWordBackward(event)) {\n            event.preventDefault();\n            return editor.moveWordBackward();\n        }\n\n        if (Hotkeys.isMoveWordForward(event)) {\n            event.preventDefault();\n            return editor.moveWordForward();\n        }\n\n        if (Hotkeys.isExtendBackward(event)) {\n            const startText = document.getNode(start.path);\n            const [prevEntry] = document.texts({\n                path: start.path,\n                direction: 'backward'\n            });\n\n            let isPrevInVoid = false;\n\n            if (prevEntry) {\n                const [, prevPath] = prevEntry;\n                isPrevInVoid = document.hasVoidParent(prevPath, editor);\n            }\n\n            if (hasVoidParent || isPrevInVoid || startText.text === '') {\n                event.preventDefault();\n                return editor.moveFocusBackward();\n            }\n        }\n\n        if (Hotkeys.isExtendForward(event)) {\n            const startText = document.getNode(start.path);\n            const [nextEntry] = document.texts({ path: start.path });\n            let isNextInVoid = false;\n\n            if (nextEntry) {\n                const [, nextPath] = nextEntry;\n                isNextInVoid = document.hasVoidParent(nextPath, editor);\n            }\n\n            if (hasVoidParent || isNextInVoid || startText.text === '') {\n                event.preventDefault();\n                return editor.moveFocusForward();\n            }\n        }\n\n        if (event.keyCode === TAB) {\n            event.preventDefault();\n            return editor.insertText(TAB_SPACE);\n        }\n\n        next();\n    }\n\n    /**\n     * On mouse down.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onMouseDown(event, editor, next) {\n        debug('onMouseDown', { event });\n        AfterPlugin.isMouseDown = true;\n        next();\n    }\n\n    /**\n     * On mouse up.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onMouseUp(event, editor, next) {\n        debug('onMouseUp', { event });\n        AfterPlugin.isMouseDown = false;\n        next();\n    }\n\n    /**\n     * On paste.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onPaste(event, editor, next) {\n        debug('onPaste', { event });\n\n        const { value } = editor;\n        const transfer = getEventTransfer(event);\n        const { type, fragment, text } = transfer;\n\n        if (type === 'fragment') {\n            editor.insertFragment(fragment);\n        }\n\n        if (type === 'text' || type === 'html') {\n            if (!text) return next();\n            const { document, selection, startBlock } = value;\n            if (editor.isVoid(startBlock)) return next();\n\n            const defaultBlock = startBlock;\n            const defaultMarks = document.getInsertMarksAtRange(selection);\n            const frag = Plain.deserialize(text, { defaultBlock, defaultMarks })\n                .document;\n            editor.insertFragment(frag);\n        }\n\n        next();\n    }\n\n    /**\n     * On select.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onSelect(event, editor, next) {\n        debug('onSelect', { event });\n        const window = getWindow(event.target);\n        const domSelection = window.getSelection();\n        // slate-next fix select the range interrupted\n        if (domSelection.rangeCount) {\n            const range = editor.findRange(domSelection);\n            if (range) {\n                const selection = editor.findSelection(domSelection);\n                editor.select(selection);\n            }\n        } else {\n            editor.blur();\n        }\n\n        // COMPAT: reset the `AfterPlugin.isMouseDown` state here in case a `mouseup` event\n        // happens outside the editor. This is needed for `onFocus` handling.\n        AfterPlugin.isMouseDown = false;\n        next();\n    }\n}\n\n/**\n * Export.\n *\n * @type {Function}\n */\n\nexport default AfterPlugin;\n","import Debug from 'debug';\nimport Hotkeys from 'slate-hotkeys';\nimport getWindow from 'get-window';\nimport { IS_FIREFOX, IS_IE, IS_IOS, HAS_INPUT_EVENTS_LEVEL_2 } from 'slate-dev-environment';\nimport DATA_ATTRS from '../../constants/data-attributes';\nconst debug = Debug('slate:before');\ndebug.track = Debug('slate:track');\n\nclass BeforePlugin {\n    static activeElement = null;\n    static compositionCount = 0;\n    static isComposing = false;\n    static isCopying = false;\n    static isDragging = false;\n\n    /**\n     * On before input.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onBeforeInput(event, editor, next) {\n        const isSynthetic = !!event.nativeEvent;\n        if (editor.readOnly) return;\n\n        // COMPAT: If the browser supports Input Events Level 2, we will have\n        // attached a custom handler for the real `beforeinput` events, instead of\n        // allowing React's synthetic polyfill, so we need to ignore synthetics.\n        // if (isSynthetic && HAS_INPUT_EVENTS_LEVEL_2) return;\n\n        debug('onBeforeInput', { event });\n        next();\n    }\n\n    /**\n     * On blur.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onBlur(event, editor, next) {\n        if (BeforePlugin.isCopying) return;\n        if (editor.readOnly) return;\n\n        const { relatedTarget, target } = event;\n        const window = getWindow(target);\n\n        // COMPAT: If the current `activeElement` is still the previous one, this is\n        // due to the window being blurred when the tab itself becomes unfocused, so\n        // we want to abort early to allow to editor to stay focused when the tab\n        // becomes focused again.\n        if (BeforePlugin.activeElement === window.document.activeElement) { return; }\n\n        // COMPAT: The `relatedTarget` can be null when the new focus target is not\n        // a \"focusable\" element (eg. a `<div>` without `tabindex` set).\n        if (relatedTarget) {\n            const el = editor.findDOMNode([]);\n\n            // COMPAT: The event should be ignored if the focus is returning to the\n            // editor from an embedded editable element (eg. an <input> element inside\n            // a void node).\n            if (relatedTarget === el) return;\n\n            // COMPAT: The event should be ignored if the focus is moving from the\n            // editor to inside a void node's spacer element.\n            if (relatedTarget.hasAttribute(DATA_ATTRS.SPACER)) return;\n\n            // COMPAT: The event should be ignored if the focus is moving to a non-\n            // editable section of an element that isn't a void node (eg. a list item\n            // of the check list example).\n            const node = editor.findNode(relatedTarget);\n\n            if (el.contains(relatedTarget) && node && !editor.isVoid(node)) {\n                return;\n            }\n        }\n\n        debug('onBlur', { event });\n        next();\n    }\n\n    /**\n     * On composition end.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onCompositionEnd(event, editor, next) {\n        const n = BeforePlugin.compositionCount;\n\n        // The `count` check here ensures that if another composition starts\n        // before the timeout has closed out this one, we will abort unsetting the\n        // `isComposing` flag, since a composition is still in affect.\n        window.setTimeout(() => {\n            if (BeforePlugin.compositionCount > n) return;\n            BeforePlugin.isComposing = false;\n        }, 100);\n\n        debug('onCompositionEnd', { event });\n        next();\n    }\n\n    /**\n     * On click.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onClick(event, editor, next) {\n        debug('onClick', { event });\n        next();\n    }\n\n    /**\n     * On composition start.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onCompositionStart(event, editor, next) {\n        BeforePlugin.isComposing = true;\n        BeforePlugin.compositionCount++;\n\n        const { value } = editor;\n        const { selection } = value;\n\n        if (!selection.isCollapsed) {\n            // https://github.com/ianstormtaylor/slate/issues/1879\n            // When composition starts and the current selection is not collapsed, the\n            // second composition key-down would drop the text wrapping <spans> which\n            // resulted on crash in content.updateSelection after composition ends\n            // (because it cannot find <span> nodes in DOM). This is a workaround that\n            // erases selection as soon as composition starts and preventing <spans>\n            // to be dropped.\n            editor.delete();\n        }\n\n        debug('onCompositionStart', { event });\n        next();\n    }\n\n    /**\n     * On copy.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onCopy(event, editor, next) {\n        const window = getWindow(event.target);\n        BeforePlugin.isCopying = true;\n        window.requestAnimationFrame(() => (BeforePlugin.isCopying = false));\n\n        debug('onCopy', { event });\n        next();\n    }\n\n    /**\n     * On cut.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onCut(event, editor, next) {\n        if (editor.readOnly) return;\n\n        const window = getWindow(event.target);\n        BeforePlugin.isCopying = true;\n        window.requestAnimationFrame(() => (BeforePlugin.isCopying = false));\n\n        debug('onCut', { event });\n        next();\n    }\n\n    /**\n     * On drag end.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onDragEnd(event, editor, next) {\n        BeforePlugin.isDragging = false;\n        debug('onDragEnd', { event });\n        next();\n    }\n\n    /**\n     * On drag enter.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onDragEnter(event, editor, next) {\n        debug('onDragEnter', { event });\n        next();\n    }\n\n    /**\n     * On drag exit.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onDragExit(event, editor, next) {\n        debug('onDragExit', { event });\n        next();\n    }\n\n    /**\n     * On drag leave.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onDragLeave(event, editor, next) {\n        debug('onDragLeave', { event });\n        next();\n    }\n\n    /**\n     * On drag over.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onDragOver(event, editor, next) {\n        // If the target is inside a void node, and only in this case,\n        // call `preventDefault` to signal that drops are allowed.\n        // When the target is editable, dropping is already allowed by\n        // default, and calling `preventDefault` hides the cursor.\n        const node = editor.findNode(event.target);\n\n        if (!node || editor.isVoid(node)) {\n            event.preventDefault();\n        }\n\n        // COMPAT: IE won't call onDrop on contentEditables unless the\n        // default dragOver is prevented:\n        // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/913982/\n        // (2018/07/11)\n        if (IS_IE) {\n            event.preventDefault();\n        }\n\n        // If a drag is already in progress, don't do this again.\n        if (!BeforePlugin.isDragging) {\n            BeforePlugin.isDragging = true;\n\n            // COMPAT: IE will raise an `unspecified error` if dropEffect is\n            // set. (2018/07/11)\n            if (!IS_IE) {\n                event.nativeEvent.dataTransfer.dropEffect = 'move';\n            }\n        }\n\n        debug('onDragOver', { event });\n        next();\n    }\n\n    /**\n     * On drag start.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onDragStart(event, editor, next) {\n        BeforePlugin.isDragging = true;\n        debug('onDragStart', { event });\n        next();\n    }\n\n    /**\n     * On drop.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onDrop(event, editor, next) {\n        if (editor.readOnly) return;\n\n        // Prevent default so the DOM's value isn't corrupted.\n        event.preventDefault();\n\n        debug('onDrop', { event });\n        next();\n    }\n\n    /**\n     * On focus.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onFocus(event, editor, next) {\n        if (BeforePlugin.isCopying) return;\n        if (editor.readOnly) return;\n\n        const el = editor.findDOMNode([]);\n\n        // Save the new `activeElement`.\n        const window = getWindow(event.target);\n        BeforePlugin.activeElement = window.document.activeElement;\n\n        // COMPAT: If the editor has nested editable elements, the focus can go to\n        // those elements. In Firefox, this must be prevented because it results in\n        // issues with keyboard navigation. (2017/03/30)\n        if (IS_FIREFOX && event.target !== el) {\n            el.focus();\n            return;\n        }\n\n        debug('onFocus', { event });\n        next();\n    }\n\n    /**\n     * On input.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onInput(event, editor, next) {\n        if (BeforePlugin.isComposing) return;\n        if (editor.value.selection.isBlurred) return;\n        debug('onInput', { event });\n        next();\n    }\n\n    /**\n     * On key down.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onKeyDown(event, editor, next) {\n        if (editor.readOnly) return;\n\n        // When composing, we need to prevent all hotkeys from executing while\n        // typing. However, certain characters also move the selection before\n        // we're able to handle it, so prevent their default behavior.\n        if (BeforePlugin.isComposing) {\n            if (Hotkeys.isCompose(event)) event.preventDefault();\n            return;\n        }\n\n        // Certain hotkeys have native editing behaviors in `contenteditable`\n        // elements which will editor the DOM and cause our value to be out of sync,\n        // so they need to always be prevented.\n        if (\n            !IS_IOS &&\n            (Hotkeys.isBold(event) ||\n                Hotkeys.isDeleteBackward(event) ||\n                Hotkeys.isDeleteForward(event) ||\n                Hotkeys.isDeleteLineBackward(event) ||\n                Hotkeys.isDeleteLineForward(event) ||\n                Hotkeys.isDeleteWordBackward(event) ||\n                Hotkeys.isDeleteWordForward(event) ||\n                Hotkeys.isItalic(event) ||\n                Hotkeys.isRedo(event) ||\n                Hotkeys.isSplitBlock(event) ||\n                Hotkeys.isTransposeCharacter(event) ||\n                Hotkeys.isUndo(event))\n        ) {\n            event.preventDefault();\n        }\n\n        debug('onKeyDown', { event });\n        debug.track('track start : onKeyDown');\n        next();\n    }\n\n    /**\n     * On paste.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onPaste(event, editor, next) {\n        if (editor.readOnly) return;\n\n        // Prevent defaults so the DOM state isn't corrupted.\n        event.preventDefault();\n\n        debug('onPaste', { event });\n        next();\n    }\n\n    /**\n     * On select.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @param {Function} next\n     */\n\n    static onSelect(event, editor, next) {\n        if (BeforePlugin.isCopying) return;\n        if (BeforePlugin.isComposing) return;\n\n        if (editor.readOnly) return;\n\n        // Save the new `activeElement`.\n        const window = getWindow(event.target);\n        BeforePlugin.activeElement = window.document.activeElement;\n\n        debug('onSelect', { event });\n        next();\n    }\n\n}\n\nexport default BeforePlugin;\n","import AfterPlugin from './after';\nimport BeforePlugin from './before';\n\nfunction DOMPlugin(options: any = {}) {\n    const { plugins = [] } = options;\n    // COMPAT: Add Android specific handling separately before it gets to the\n    // other plugins because it is specific (other browser don't need it) and\n    // finicky (it has to come before other plugins to work).\n    // const androidPlugins = IS_ANDROID\n    //   ? [AndroidPlugin(options), NoopPlugin(options)]\n    //   : [];\n\n    return [BeforePlugin, ...plugins, AfterPlugin];\n}\n\nexport default DOMPlugin;\n","import { Editor } from 'slate';\n\nclass CommandsPlugin {\n\n    static reconcileNode(editor, node) {\n        const { value } = editor;\n        const { document, selection } = value;\n        const path = document.getPath(node.key);\n\n        const domElement = editor.findDOMNode(path);\n        const block = document.getClosestBlock(path);\n\n        // Get text information\n        const { text } = node;\n        let { textContent: domText } = domElement;\n\n        const isLastNode = block.nodes.last() === node;\n        const lastChar = domText.charAt(domText.length - 1);\n\n        // COMPAT: If this is the last leaf, and the DOM text ends in a new line,\n        // we will have added another new line in <Leaf>'s render method to account\n        // for browsers collapsing a single trailing new lines, so remove it.\n        if (isLastNode && lastChar === '\\n') {\n            domText = domText.slice(0, -1);\n        }\n\n        // If the text is no different, abort.\n        if (text === domText) return;\n\n        let entire = selection.moveAnchorTo(path, 0).moveFocusTo(path, text.length);\n\n        entire = document.resolveRange(entire);\n\n        // Change the current value to have the leaf's text replaced.\n        editor.insertTextAtRange(entire, domText, node.marks);\n        return;\n    }\n\n    static reconcileDOMNode(editor, domNode) {\n        const domElement = domNode.parentElement.closest('[data-key]');\n        const node = editor.findNode(domElement);\n        editor.reconcileNode(node);\n    }\n\n    // slate origin remove mark method\n    static removeMarkOrigin(editor, mark) {\n        const { value } = editor;\n        const { document, selection, anchorText } = value;\n\n        if (selection.isExpanded) {\n            editor.removeMarkAtRange(selection, mark);\n        } else if (selection.marks) {\n            const marks = selection.marks.remove(mark);\n            const sel = selection.set('marks', marks);\n            editor.select(sel);\n        } else {\n            const marks = document.getActiveMarksAtRange(selection).remove(mark);\n            const sel = selection.set('marks', marks);\n            editor.select(sel);\n        }\n    }\n\n    static removeMark(editor, mark) {\n        const { value } = editor;\n        const { document, selection, anchorText } = value;\n\n        if (selection.isExpanded) {\n            editor.removeMarkAtRange(selection, mark);\n        } else if (selection.marks) {\n            const marks = selection.marks.remove(mark);\n            const sel = selection.set('marks', marks);\n            editor.select(sel);\n        } else {\n            const marks = document.getActiveMarksAtRange(selection).remove(mark);\n            const sel = selection.set('marks', marks);\n            editor.select(sel);\n        }\n\n        // The cursor position is still in mark when mark is cancelled\n        if (selection.isCollapsed && anchorText.text === '\\u200B') {\n            editor.removeMarkByPath(selection.start.path, 0, 1, mark);\n        }\n        if (selection.isCollapsed && anchorText.text !== '\\u200B' && anchorText.text !== '') {\n            editor.insertText('\\u200B');\n        }\n    }\n\n    static addMark(editor, mark) {\n        const { value } = editor;\n        const { document, selection, anchorText } = value;\n\n        if (selection.isExpanded) {\n            editor.addMarkAtRange(selection, mark);\n        } else if (selection.marks) {\n            const marks = selection.marks.add(mark);\n            const sel = selection.set('marks', marks);\n            editor.select(sel);\n        } else {\n            const marks = document.getActiveMarksAtRange(selection).add(mark);\n            const sel = selection.set('marks', marks);\n            editor.select(sel);\n        }\n\n        // The cursor position is still in mark when mark is cancelled\n        if (selection.isCollapsed && anchorText.text === '\\u200B') {\n            editor.addMarkByPath(selection.start.path, 0, 1, mark);\n        }\n        if (selection.isCollapsed && anchorText.text !== '\\u200B' && anchorText.text !== '') {\n            editor.insertText('\\u200B');\n        }\n    }\n}\n\nexport default {\n    commands: CommandsPlugin\n};\n","import getWindow from 'get-window';\nimport { PathUtils } from 'slate';\nimport { List } from 'immutable';\nimport DATA_ATTRS from '../../constants/data-attributes';\nimport SELECTORS from '../../constants/selectors';\n\nclass QueriesPlugin {\n    /**\n     * Find the native DOM element for a node at `path`.\n     *\n     * @param {Editor} editor\n     * @param {Array|List} path\n     * @return {DOMNode|Null}\n     */\n\n    static findDOMNode(editor, path) {\n        path = PathUtils.create(path);\n        const contentRef = editor.tmp.contentRef;\n\n        if (!contentRef) {\n            return null;\n        }\n\n        if (!path.size) {\n            return contentRef.rootNode || null;\n        }\n\n        const search = (instance, p) => {\n            if (!instance) {\n                return null;\n            }\n\n            if (!p.size) {\n                return instance.rootNode || null;\n            }\n\n            const index = p.first();\n            const rest = p.rest();\n            const ref = instance.getNodeRef(index);\n            return search(ref, rest);\n        };\n\n        const documentNodeRef = contentRef.nodeRef;\n        const el = search(documentNodeRef, path);\n        return el;\n    }\n\n    /**\n     * Find a native DOM selection point from a Slate `point`.\n     *\n     * @param {Editor} editor\n     * @param {Point} point\n     * @return {Object|Null}\n     */\n\n    static findDOMPoint(editor, point) {\n        const el = editor.findDOMNode(point.path);\n        let start = 0;\n\n        if (!el) {\n            return null;\n        }\n\n        // For each leaf, we need to isolate its content, which means filtering to its\n        // direct text and zero-width spans. (We have to filter out any other siblings\n        // that may have been rendered alongside them.)\n        const texts: any = Array.from(\n            el.querySelectorAll(`${SELECTORS.STRING}, ${SELECTORS.ZERO_WIDTH}`)\n        );\n\n        for (const text of texts) {\n            const node = text.childNodes[0];\n            const domLength = node.textContent.length;\n            let slateLength = domLength;\n\n            if (text.hasAttribute(DATA_ATTRS.LENGTH)) {\n                slateLength = parseInt(\n                    text.getAttribute(DATA_ATTRS.LENGTH),\n                    10\n                );\n            }\n\n            const end = start + slateLength;\n\n            if (point.offset <= end) {\n                const offset = Math.min(\n                    domLength,\n                    Math.max(0, point.offset - start)\n                );\n                // adjust empty text selection, prevent delete comment of Angular when clear compsition input\n                if (offset === 0 && domLength === 1 && node.textContent === '\\u200B') {\n                    return { node, offset: offset + 1 };\n                }\n                return { node, offset };\n            }\n\n            start = end;\n        }\n\n        return null;\n    }\n\n    /**\n     * Find a native DOM range from a Slate `range`.\n     *\n     * @param {Editor} editor\n     * @param {Range} range\n     * @return {DOMRange|Null}\n     */\n\n    static findDOMRange(editor, range) {\n        const { anchor, focus, isBackward, isCollapsed } = range;\n        const domAnchor = editor.findDOMPoint(anchor);\n        const domFocus = isCollapsed ? domAnchor : editor.findDOMPoint(focus);\n\n        if (!domAnchor || !domFocus) {\n            return null;\n        }\n\n        const window = getWindow(domAnchor.node);\n        const r = window.document.createRange();\n        const start = isBackward ? domFocus : domAnchor;\n        const end = isBackward ? domAnchor : domFocus;\n        r.setStart(start.node, start.offset);\n        r.setEnd(end.node, end.offset);\n        return r;\n    }\n\n    /**\n     * Find a Slate node from a native DOM `element`.\n     *\n     * @param {Editor} editor\n     * @param {Element} element\n     * @return {List|Null}\n     */\n\n    static findNode(editor, element) {\n        const path = editor.findPath(element);\n\n        if (!path) {\n            return null;\n        }\n\n        const { value } = editor;\n        const { document } = value;\n        const node = document.getNode(path);\n        return node;\n    }\n\n    /**\n     * Get the target range from a DOM `event`.\n     *\n     * @param {Event} event\n     * @param {Editor} editor\n     * @return {Range}\n     */\n\n    static findEventRange(editor, event) {\n        if (event.nativeEvent) {\n            event = event.nativeEvent;\n        }\n\n        const { clientX: x, clientY: y, target } = event;\n        if (x == null || y == null) return null;\n\n        const { value } = editor;\n        const { document } = value;\n        const path = editor.findPath(event.target);\n        if (!path) return null;\n\n        const node = document.getNode(path);\n\n        // If the drop target is inside a void node, move it into either the next or\n        // previous node, depending on which side the `x` and `y` coordinates are\n        // closest to.\n        if (editor.isVoid(node)) {\n            const rect = target.getBoundingClientRect();\n            const isPrevious =\n                node.object === 'inline'\n                    ? x - rect.left < rect.left + rect.width - x\n                    : y - rect.top < rect.top + rect.height - y;\n\n            const range = (document as any).createRange();\n            const move = isPrevious ? 'moveToEndOfNode' : 'moveToStartOfNode';\n            const entry = document[\n                isPrevious ? 'getPreviousText' : 'getNextText'\n            ](path);\n\n            if (entry) {\n                return range[move](entry);\n            }\n\n            return null;\n        }\n\n        // Else resolve a range from the caret position where the drop occured.\n        const window = getWindow(target);\n        let native;\n\n        // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n        if (window.document.caretRangeFromPoint) {\n            native = window.document.caretRangeFromPoint(x, y);\n        } else if (window.document.caretPositionFromPoint) {\n            const position = window.document.caretPositionFromPoint(x, y);\n            native = window.document.createRange();\n            native.setStart(position.offsetNode, position.offset);\n            native.setEnd(position.offsetNode, position.offset);\n        } else if (window.document.body.createTextRange) {\n            // COMPAT: In IE, `caretRangeFromPoint` and\n            // `caretPositionFromPoint` don't exist. (2018/07/11)\n            native = window.document.body.createTextRange();\n\n            try {\n                native.moveToPoint(x, y);\n            } catch (error) {\n                // IE11 will raise an `unspecified error` if `moveToPoint` is\n                // called during a dropEvent.\n                return null;\n            }\n        }\n\n        // Resolve a Slate range from the DOM range.\n        const retRange = editor.findRange(native);\n        return retRange;\n    }\n\n    /**\n     * Find the path of a native DOM `element` by searching React refs.\n     *\n     * @param {Editor} editor\n     * @param {Element} element\n     * @return {List|Null}\n     */\n\n    static findPath(editor, element): List<number> {\n        const contentRef = editor.tmp.contentRef;\n        let nodeElement = element;\n\n        // If element does not have a key, it is likely a string or\n        // mark, return the closest parent Node that can be looked up.\n        if (!nodeElement.hasAttribute(DATA_ATTRS.KEY)) {\n            nodeElement = nodeElement.closest(SELECTORS.KEY);\n        }\n\n        if (!nodeElement || !nodeElement.getAttribute(DATA_ATTRS.KEY)) {\n            return null;\n        }\n\n        if (nodeElement === contentRef.rootNode) {\n            return PathUtils.create([]);\n        }\n\n        const search = (instance, p) => {\n            if (nodeElement === instance.rootNode) {\n                return p;\n            }\n\n            if (!instance.nodeRefs) {\n                return null;\n            }\n            const nodeRefs = instance.nodeRefs;\n            let i = 0;\n            for (const nodeRef of nodeRefs) {\n                const retPath = search(nodeRef, [...p, i]);\n                i++;\n                if (retPath) {\n                    return retPath;\n                }\n            }\n            return null;\n        };\n\n        const documentNodeRef = contentRef.nodeRef;\n        const path = search(documentNodeRef, []);\n\n        if (!path) {\n            return null;\n        }\n\n        return PathUtils.create(path);\n    }\n\n    /**\n     * Find a Slate point from a DOM selection's `nativeNode` and `nativeOffset`.\n     *\n     * @param {Editor} editor\n     * @param {Element} nativeNode\n     * @param {Number} nativeOffset\n     * @return {Point}\n     */\n\n    static findPoint(editor, nativeNode, nativeOffset) {\n        const {\n            node: nearestNode,\n            offset: nearestOffset\n        } = normalizeNodeAndOffset(nativeNode, nativeOffset);\n\n        const window = getWindow(nativeNode);\n        const { parentNode } = nearestNode;\n        let leafNode = parentNode.closest(SELECTORS.LEAF);\n        let textNode;\n        let offset;\n        let node;\n\n        // Calculate how far into the text node the `nearestNode` is, so that we can\n        // determine what the offset relative to the text node is.\n        if (leafNode) {\n            textNode = leafNode.closest(SELECTORS.TEXT);\n            const range = window.document.createRange();\n            range.setStart(textNode, 0);\n            range.setEnd(nearestNode, nearestOffset);\n            const contents = range.cloneContents();\n            const zeroWidths = contents.querySelectorAll(SELECTORS.ZERO_WIDTH);\n\n            Array.from(zeroWidths).forEach((el: any) => {\n                el.parentNode.removeChild(el);\n            });\n\n            // COMPAT: Edge has a bug where Range.prototype.toString() will convert \\n\n            // into \\r\\n. The bug causes a loop when slate-react attempts to reposition\n            // its cursor to match the native position. Use textContent.length instead.\n            // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n            offset = contents.textContent.length;\n            node = textNode;\n        } else {\n            // For void nodes, the element with the offset key will be a cousin, not an\n            // ancestor, so find it by going down from the nearest void parent.\n            const voidNode = parentNode.closest(SELECTORS.VOID);\n\n            if (!voidNode) {\n                return null;\n            }\n\n            leafNode = voidNode.querySelector(SELECTORS.LEAF);\n\n            if (!leafNode) {\n                return null;\n            }\n\n            textNode = leafNode.closest(SELECTORS.TEXT);\n            node = leafNode;\n            offset = node.textContent.length;\n        }\n\n        // COMPAT: If the parent node is a Slate zero-width space, this is because the\n        // text node should have no characters. However, during IME composition the\n        // ASCII characters will be prepended to the zero-width space, so subtract 1\n        // from the offset to account for the zero-width space character.\n        if (\n            offset === node.textContent.length &&\n            parentNode.hasAttribute(DATA_ATTRS.ZERO_WIDTH)\n        ) {\n            offset--;\n        }\n\n        // COMPAT: If someone is clicking from one Slate editor into another, the\n        // select event fires twice, once for the old editor's `element` first, and\n        // then afterwards for the correct `element`. (2017/03/03)\n        const path = editor.findPath(textNode);\n\n        if (!path) {\n            return null;\n        }\n\n        const { value } = editor;\n        const { document } = value;\n        const point = document.createPoint({ path, offset });\n        return point;\n    }\n\n    /**\n     * Find a Slate range from a DOM range or selection.\n     *\n     * @param {Editor} editor\n     * @param {Selection} domRange\n     * @return {Range}\n     */\n\n    static findRange(editor, domRange) {\n        const el = domRange.anchorNode || domRange.startContainer;\n\n        if (!el) {\n            return null;\n        }\n\n        const window = getWindow(el);\n\n        // If the `domRange` object is a DOM `Range` or `StaticRange` object, change it\n        // into something that looks like a DOM `Selection` instead.\n        if (\n            domRange instanceof window.Range ||\n            (window.StaticRange && domRange instanceof window.StaticRange)\n        ) {\n            domRange = {\n                anchorNode: domRange.startContainer,\n                anchorOffset: domRange.startOffset,\n                focusNode: domRange.endContainer,\n                focusOffset: domRange.endOffset\n            };\n        }\n\n        const {\n            anchorNode,\n            anchorOffset,\n            focusNode,\n            focusOffset,\n            isCollapsed\n        } = domRange;\n        const { value } = editor;\n        const anchor = editor.findPoint(anchorNode, anchorOffset);\n        const focus = isCollapsed\n            ? anchor\n            : editor.findPoint(focusNode, focusOffset);\n\n        if (!anchor || !focus) {\n            return null;\n        }\n\n        const { document } = value;\n        const range = document.createRange({\n            anchor,\n            focus\n        });\n\n        return range;\n    }\n\n    /**\n     * Find a Slate selection from a DOM selection.\n     *\n     * @param {Editor} editor\n     * @param {Selection} domSelection\n     * @return {Range}\n     */\n\n    static findSelection(editor, domSelection) {\n        const { value } = editor;\n        const { document } = value;\n\n        // If there are no ranges, the editor was blurred natively.\n        if (!domSelection.rangeCount) {\n            return null;\n        }\n\n        // Otherwise, determine the Slate selection from the native one.\n        let range = editor.findRange(domSelection);\n\n        if (!range) {\n            return null;\n        }\n\n        const { anchor, focus } = range;\n        const anchorText = document.getNode(anchor.path);\n        const focusText = document.getNode(focus.path);\n        const anchorInline = document.getClosestInline(anchor.path);\n        const focusInline = document.getClosestInline(focus.path);\n        const focusBlock = document.getClosestBlock(focus.path);\n        const anchorBlock = document.getClosestBlock(anchor.path);\n\n        // COMPAT: If the anchor point is at the start of a non-void, and the\n        // focus point is inside a void node with an offset that isn't `0`, set\n        // the focus offset to `0`. This is due to void nodes <span>'s being\n        // positioned off screen, resulting in the offset always being greater\n        // than `0`. Since we can't know what it really should be, and since an\n        // offset of `0` is less destructive because it creates a hanging\n        // selection, go with `0`. (2017/09/07)\n        if (\n            anchorBlock &&\n            !editor.isVoid(anchorBlock) &&\n            anchor.offset === 0 &&\n            focusBlock &&\n            editor.isVoid(focusBlock) &&\n            focus.offset !== 0\n        ) {\n            range = range.setFocus(focus.setOffset(0));\n        }\n\n        // COMPAT: If the selection is at the end of a non-void inline node, and\n        // there is a node after it, put it in the node after instead. This\n        // standardizes the behavior, since it's indistinguishable to the user.\n        // selection is at start of a non-void inline node\n        // there is a node after it, put it in the node before instead\n        if (\n            anchorInline &&\n            !editor.isVoid(anchorInline)\n        ) {\n            const block = document.getClosestBlock(anchor.path);\n            const depth = document.getDepth(block.key);\n            const relativePath = PathUtils.drop(anchor.path, depth);\n            if (anchor.offset === anchorText.text.length) {\n                const [next] = block.texts({ path: relativePath });\n                if (next) {\n                    const [, nextPath] = next;\n                    const absolutePath = anchor.path\n                        .slice(0, depth)\n                        .concat(nextPath);\n                    range = range.moveAnchorTo(absolutePath, 0);\n                }\n            } else if (anchor.offset === 0) {\n                const [previousText] = block.texts({ path: relativePath, direction: 'backward' });\n                if (previousText) {\n                    const [previous, previousPath] = previousText;\n                    const absolutePath = anchor.path\n                        .slice(0, depth)\n                        .concat(previousPath);\n                    range = range.moveAnchorTo(absolutePath, previous.text.length);\n                }\n            }\n        }\n\n        if (\n            focusInline &&\n            !editor.isVoid(focusInline)\n        ) {\n            const block = document.getClosestBlock(focus.path);\n            const depth = document.getDepth(block.key);\n            const relativePath = PathUtils.drop(focus.path, depth);\n            if (focus.offset === focusText.text.length) {\n                const [next] = block.texts({ path: relativePath });\n                if (next) {\n                    const [, nextPath] = next;\n                    const absolutePath = focus.path\n                        .slice(0, depth)\n                        .concat(nextPath);\n                    range = range.moveFocusTo(absolutePath, 0);\n                }\n            } else if (focus.offset === 0) {\n                const [previousTextEntry] = block.texts({ path: relativePath, direction: 'backward' });\n                if (previousTextEntry) {\n                    const [previous, previousPath] = previousTextEntry;\n                    const absolutePath = focus.path\n                        .slice(0, depth)\n                        .concat(previousPath);\n                    range = range.moveFocusTo(absolutePath, previous.text.length);\n                }\n            }\n        }\n\n        let selection = document.createSelection(range);\n\n        // COMPAT: Ensure that the `isFocused` argument is set.\n        selection = selection.setIsFocused(true);\n\n        // COMPAT: Preserve the marks, since we have no way of knowing what the DOM\n        // selection's marks were. They will be cleared automatically by the\n        // `select` command if the selection moves.\n        selection = selection.set('marks', value.selection.marks);\n\n        return selection;\n    }\n}\n\n/**\n * From a DOM selection's `node` and `offset`, normalize so that it always\n * refers to a text node.\n *\n * @param {Element} node\n * @param {Number} offset\n * @return {Object}\n */\n\nfunction normalizeNodeAndOffset(node, offset) {\n    // If it's an element node, its offset refers to the index of its children\n    // including comment nodes, so try to find the right text child node.\n    if (node.nodeType === 1 && node.childNodes.length) {\n        const isLast = offset === node.childNodes.length;\n        const direction = isLast ? 'backward' : 'forward';\n        const index = isLast ? offset - 1 : offset;\n        node = getEditableChild(node, index, direction);\n\n        // If the node has children, traverse until we have a leaf node. Leaf nodes\n        // can be either text nodes, or other void DOM nodes.\n        while (node.nodeType === 1 && node.childNodes.length) {\n            const i = isLast ? node.childNodes.length - 1 : 0;\n            node = getEditableChild(node, i, direction);\n        }\n\n        // Determine the new offset inside the text node.\n        offset = isLast ? node.textContent.length : 0;\n    }\n\n    // Return the node and offset.\n    return { node, offset };\n}\n\n/**\n * Get the nearest editable child at `index` in a `parent`, preferring\n * `direction`.\n *\n * @param {Element} parent\n * @param {Number} index\n * @param {String} direction ('forward' or 'backward')\n * @return {Element|Null}\n */\n\nfunction getEditableChild(parent, index, direction) {\n    const { childNodes } = parent;\n    let child = childNodes[index];\n    let i = index;\n    let triedForward = false;\n    let triedBackward = false;\n\n    // While the child is a comment node, or an element node with no children,\n    // keep iterating to find a sibling non-void, non-comment node.\n    while (\n        child.nodeType === 8 ||\n        (child.nodeType === 1 && child.childNodes.length === 0) ||\n        (child.nodeType === 1 &&\n            child.getAttribute('contenteditable') === 'false')\n    ) {\n        if (triedForward && triedBackward) break;\n\n        if (i >= childNodes.length) {\n            triedForward = true;\n            i = index - 1;\n            direction = 'backward';\n            continue;\n        }\n\n        if (i < 0) {\n            triedBackward = true;\n            i = index + 1;\n            direction = 'forward';\n            continue;\n        }\n\n        child = childNodes[i];\n        if (direction === 'forward') i++;\n        if (direction === 'backward') i--;\n    }\n\n    return child || null;\n}\n\nexport default {\n    queries: QueriesPlugin\n};\n","import EditorPropsPlugin from './editor-props';\nimport DOMPlugin from '../dom';\nimport CommandsPlugin from './commands';\nimport QueriesPlugin from './queries';\n\n/**\n * A plugin that adds the React-specific rendering logic to the editor.\n *\n * @param {Object} options\n * @return {Object}\n */\n\nfunction AngularPlugin(options = {}) {\n    const editorPropsPlugin = EditorPropsPlugin(options);\n    const domPlugin = DOMPlugin(options);\n    return [editorPropsPlugin, domPlugin, CommandsPlugin, QueriesPlugin];\n}\n\n/**\n * Export.\n *\n * @type {Function}\n */\n\nexport default AngularPlugin;\n","import getWindow from 'get-window';\nimport { IS_SAFARI, IS_IOS } from 'slate-dev-environment';\n\n/**\n * CSS overflow values that would cause scrolling.\n *\n * @type {Array}\n */\n\nconst OVERFLOWS = ['auto', 'overlay', 'scroll'];\n\n/**\n * Detect whether we are running IOS version 11\n */\n\nconst IS_IOS_11 = IS_IOS && !!window.navigator.userAgent.match(/os 11_/i);\n\nfunction isBackward(selection: Selection): boolean {\n    const startNode: Node = selection.anchorNode;\n    const startOffset: number = selection.anchorOffset;\n    const endNode: Node = selection.focusNode;\n    const endOffset: number = selection.focusOffset;\n    const position: number = startNode.compareDocumentPosition(endNode);\n\n    return !(\n        position === 4 /* Node.DOCUMENT_POSITION_FOLLOWING */ ||\n        (position === 0 && startOffset < endOffset)\n    );\n}\n\n/**\n * Find the nearest parent with scrolling, or window.\n *\n * @param {el} Element\n */\n\nfunction findScrollContainer(el, window) {\n    let parent = el.parentNode;\n    let scroller;\n\n    while (!scroller) {\n        if (!parent.parentNode) break;\n\n        const style = window.getComputedStyle(parent);\n        const { overflowY } = style;\n\n        if (OVERFLOWS.includes(overflowY)) {\n            scroller = parent;\n            break;\n        }\n\n        parent = parent.parentNode;\n    }\n\n    // COMPAT: Because Chrome does not allow doucment.body.scrollTop, we're\n    // assuming that window.scrollTo() should be used if the scrollable element\n    // turns out to be document.body or document.documentElement. This will work\n    // unless body is intentionally set to scrollable by restricting its height\n    // (e.g. height: 100vh).\n    if (!scroller) {\n        return window.document.body;\n    }\n\n    return scroller;\n}\n\n/**\n * Scroll the current selection's focus point into view if needed.\n *\n * @param {Selection} selection\n */\n\nfunction scrollToSelection(selection) {\n    if (IS_IOS_11) return;\n    if (!selection.anchorNode) return;\n\n    const window = getWindow(selection.anchorNode);\n    const scroller = findScrollContainer(selection.anchorNode, window);\n    const isWindow = scroller === window.document.body || scroller === window.document.documentElement;\n    const backward = isBackward(selection);\n\n    const range = selection.getRangeAt(0).cloneRange();\n    range.collapse(backward);\n    let cursorRect = range.getBoundingClientRect();\n\n    // COMPAT: range.getBoundingClientRect() returns 0s in Safari when range is\n    // collapsed. Expanding the range by 1 is a relatively effective workaround\n    // for vertical scroll, although horizontal may be off by 1 character.\n    // https://bugs.webkit.org/show_bug.cgi?id=138949\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=435438\n    if (IS_SAFARI) {\n        if (range.collapsed && cursorRect.top === 0 && cursorRect.height === 0) {\n            if (range.startOffset === 0) {\n                range.setEnd(range.endContainer, 1);\n            } else {\n                range.setStart(range.startContainer, range.startOffset - 1);\n            }\n\n            cursorRect = range.getBoundingClientRect();\n\n            if (cursorRect.top === 0 && cursorRect.height === 0) {\n                if (range.getClientRects().length) {\n                    cursorRect = range.getClientRects()[0];\n                }\n            }\n        }\n    }\n\n    let width;\n    let height;\n    let yOffset;\n    let xOffset;\n    let scrollerTop = 0;\n    let scrollerLeft = 0;\n    let scrollerBordersY = 0;\n    let scrollerBordersX = 0;\n    let scrollerPaddingTop = 0;\n    let scrollerPaddingBottom = 0;\n    let scrollerPaddingLeft = 0;\n    let scrollerPaddingRight = 0;\n\n    if (isWindow) {\n        const { innerWidth, innerHeight, pageYOffset, pageXOffset } = window;\n        width = innerWidth;\n        height = innerHeight;\n        yOffset = pageYOffset;\n        xOffset = pageXOffset;\n    } else {\n        const { offsetWidth, offsetHeight, scrollTop, scrollLeft } = scroller;\n        const {\n            borderTopWidth,\n            borderBottomWidth,\n            borderLeftWidth,\n            borderRightWidth,\n            paddingTop,\n            paddingBottom,\n            paddingLeft,\n            paddingRight\n        } = window.getComputedStyle(scroller);\n\n        const scrollerRect = scroller.getBoundingClientRect();\n        width = offsetWidth;\n        height = offsetHeight;\n        scrollerTop = scrollerRect.top + parseInt(borderTopWidth, 10);\n        scrollerLeft = scrollerRect.left + parseInt(borderLeftWidth, 10);\n\n        scrollerBordersY = parseInt(borderTopWidth, 10) + parseInt(borderBottomWidth, 10);\n\n        scrollerBordersX = parseInt(borderLeftWidth, 10) + parseInt(borderRightWidth, 10);\n\n        scrollerPaddingTop = parseInt(paddingTop, 10);\n        scrollerPaddingBottom = parseInt(paddingBottom, 10);\n        scrollerPaddingLeft = parseInt(paddingLeft, 10);\n        scrollerPaddingRight = parseInt(paddingRight, 10);\n        yOffset = scrollTop;\n        xOffset = scrollLeft;\n    }\n\n    const cursorTop = cursorRect.top + yOffset - scrollerTop;\n    const cursorLeft = cursorRect.left + xOffset - scrollerLeft;\n\n    let x = xOffset;\n    let y = yOffset;\n\n    if (cursorLeft < xOffset) {\n        // selection to the left of viewport\n        x = cursorLeft - scrollerPaddingLeft;\n    } else if (cursorLeft + cursorRect.width + scrollerBordersX > xOffset + width) {\n        // selection to the right of viewport\n        x = cursorLeft + scrollerBordersX + scrollerPaddingRight - width;\n    }\n\n    if (cursorTop < yOffset) {\n        // selection above viewport\n        y = cursorTop - scrollerPaddingTop;\n    } else if (cursorTop + cursorRect.height + scrollerBordersY > yOffset + height) {\n        // selection below viewport\n        y = cursorTop + scrollerBordersY + scrollerPaddingBottom + cursorRect.height - height;\n    }\n\n    if (isWindow) {\n        window.scrollTo(x, y);\n    } else {\n        scroller.scrollTop = y;\n        scroller.scrollLeft = x;\n    }\n}\n\n/**\n * Export.\n *\n * @type {Function}\n */\n\nexport default scrollToSelection;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport const canUseDOM: boolean = !!(\n    typeof window !== 'undefined' &&\n    typeof window.document !== 'undefined' &&\n    typeof window.document.createElement !== 'undefined'\n);\n","export const TOP_BLUR = 'blur';\nexport const TOP_COMPOSITION_END = 'compositionend';\nexport const TOP_COMPOSITION_START = 'compositionstart';\nexport const TOP_COMPOSITION_UPDATE = 'compositionupdate';\nexport const TOP_KEY_DOWN = 'keydown';\nexport const TOP_KEY_PRESS = 'keypress';\nexport const TOP_KEY_UP = 'keyup';\nexport const TOP_MOUSE_DOWN = 'mousedown';\nexport const TOP_MOUSE_MOVE = 'mousemove';\nexport const TOP_MOUSE_OUT = 'mouseout';\nexport const TOP_TEXT_INPUT = 'textInput';\nexport const TOP_PASTE = 'paste';\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/**\n * These variables store information about text content of a target node,\n * allowing comparison of content before and after a given event.\n *\n * Identify the node where selection currently begins, then observe\n * both its text content and its current position in the DOM. Since the\n * browser may natively replace the target node during composition, we can\n * use its position to find its replacement.\n *\n *\n */\n\nlet root = null;\nlet startText = null;\nlet fallbackText = null;\n\nexport function initialize(nativeEventTarget) {\n    root = nativeEventTarget;\n    startText = getText();\n    return true;\n}\n\nexport function reset() {\n    root = null;\n    startText = null;\n    fallbackText = null;\n}\n\nexport function getData() {\n    if (fallbackText) {\n        return fallbackText;\n    }\n\n    let start;\n    const startValue = startText;\n    const startLength = startValue.length;\n    let end;\n    const endValue = getText();\n    const endLength = endValue.length;\n\n    for (start = 0; start < startLength; start++) {\n        if (startValue[start] !== endValue[start]) {\n            break;\n        }\n    }\n\n    const minEnd = startLength - start;\n    for (end = 1; end <= minEnd; end++) {\n        if (startValue[startLength - end] !== endValue[endLength - end]) {\n            break;\n        }\n    }\n\n    const sliceTail = end > 1 ? 1 - end : undefined;\n    fallbackText = endValue.slice(start, sliceTail);\n    return fallbackText;\n}\n\nexport function getText() {\n    if ('value' in root) {\n        return root.value;\n    }\n    return root.textContent;\n}\n","export class BeforeInputEvent {\n    data = null;\n    nativeEvent: any;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// import type {TopLevelType} from 'legacy-events/TopLevelEventTypes';\n\n// import {accumulateTwoPhaseDispatches} from 'legacy-events/EventPropagators';\nimport { canUseDOM } from '../../shared/ExecutionEnvironment';\n\nimport {\n    TOP_BLUR,\n    TOP_COMPOSITION_START,\n    TOP_COMPOSITION_END,\n    TOP_COMPOSITION_UPDATE,\n    TOP_KEY_DOWN,\n    TOP_KEY_PRESS,\n    TOP_KEY_UP,\n    TOP_MOUSE_DOWN,\n    TOP_TEXT_INPUT,\n    TOP_PASTE\n} from './DOMTopLevelEventTypes';\nimport {\n    getData as FallbackCompositionStateGetData,\n    initialize as FallbackCompositionStateInitialize,\n    reset as FallbackCompositionStateReset\n} from './FallbackCompositionState';\nimport { BeforeInputEvent } from './before-input-event';\n// import SyntheticCompositionEvent from './SyntheticCompositionEvent';\n// import SyntheticInputEvent from './SyntheticInputEvent';\n\nconst END_KEYCODES = [9, 13, 27, 32]; // Tab, Return, Esc, Space\nconst START_KEYCODE = 229;\nlet HAS_TEXT_INPUT = false;\n\nconst canUseCompositionEvent = canUseDOM && 'CompositionEvent' in window;\n\nlet documentMode = null;\nif (canUseDOM && 'documentMode' in document) {\n    documentMode = (document as any).documentMode;\n}\n\n// Webkit offers a very useful `textInput` event that can be used to\n// directly represent `beforeInput`. The IE `textinput` event is not as\n// useful, so we don't use it.\nconst canUseTextInputEvent = canUseDOM && 'TextEvent' in window && !documentMode;\n\n// In IE9+, we have access to composition events, but the data supplied\n// by the native compositionend event may be incorrect. Japanese ideographic\n// spaces, for instance (\\u3000) are not recorded correctly.\nconst useFallbackCompositionData = canUseDOM && (!canUseCompositionEvent || (documentMode && documentMode > 8 && documentMode <= 11));\n\nconst SPACEBAR_CODE = 32;\nconst SPACEBAR_CHAR = String.fromCharCode(SPACEBAR_CODE);\n\n// Events and their corresponding property names.\nconst eventTypes = {\n    beforeInput: {\n        phasedRegistrationNames: {\n            bubbled: 'onBeforeInput',\n            captured: 'onBeforeInputCapture'\n        },\n        dependencies: [TOP_COMPOSITION_END, TOP_KEY_PRESS, TOP_TEXT_INPUT, TOP_PASTE]\n    },\n    compositionEnd: {\n        phasedRegistrationNames: {\n            bubbled: 'onCompositionEnd',\n            captured: 'onCompositionEndCapture'\n        },\n        dependencies: [TOP_BLUR, TOP_COMPOSITION_END, TOP_KEY_DOWN, TOP_KEY_PRESS, TOP_KEY_UP, TOP_MOUSE_DOWN]\n    },\n    compositionStart: {\n        phasedRegistrationNames: {\n            bubbled: 'onCompositionStart',\n            captured: 'onCompositionStartCapture'\n        },\n        dependencies: [TOP_BLUR, TOP_COMPOSITION_START, TOP_KEY_DOWN, TOP_KEY_PRESS, TOP_KEY_UP, TOP_MOUSE_DOWN]\n    },\n    compositionUpdate: {\n        phasedRegistrationNames: {\n            bubbled: 'onCompositionUpdate',\n            captured: 'onCompositionUpdateCapture'\n        },\n        dependencies: [TOP_BLUR, TOP_COMPOSITION_UPDATE, TOP_KEY_DOWN, TOP_KEY_PRESS, TOP_KEY_UP, TOP_MOUSE_DOWN]\n    }\n};\n\n// Track whether we've ever handled a keypress on the space key.\nlet hasSpaceKeypress = false;\n\n/**\n * Return whether a native keypress event is assumed to be a command.\n * This is required because Firefox fires `keypress` events for key commands\n * (cut, copy, select-all, etc.) even though no character is inserted.\n */\nfunction isKeypressCommand(nativeEvent) {\n    return (\n        (nativeEvent.ctrlKey || nativeEvent.altKey || nativeEvent.metaKey) &&\n        // ctrlKey && altKey is equivalent to AltGr, and is not a command.\n        !(nativeEvent.ctrlKey && nativeEvent.altKey)\n    );\n}\n\n/**\n * Translate native top level events into event types.\n *\n */\nfunction getCompositionEventType(topLevelType) {\n    switch (topLevelType) {\n        case TOP_COMPOSITION_START:\n            return eventTypes.compositionStart;\n        case TOP_COMPOSITION_END:\n            return eventTypes.compositionEnd;\n        case TOP_COMPOSITION_UPDATE:\n            return eventTypes.compositionUpdate;\n    }\n}\n\n/**\n * Does our fallback best-guess model think this event signifies that\n * composition has begun?\n *\n */\nfunction isFallbackCompositionStart(topLevelType, nativeEvent) {\n    return topLevelType === TOP_KEY_DOWN && nativeEvent.keyCode === START_KEYCODE;\n}\n\n/**\n * Does our fallback mode think that this event is the end of composition?\n *\n */\nfunction isFallbackCompositionEnd(topLevelType, nativeEvent) {\n    switch (topLevelType) {\n        case TOP_KEY_UP:\n            // Command keys insert or clear IME input.\n            return END_KEYCODES.indexOf(nativeEvent.keyCode) !== -1;\n        case TOP_KEY_DOWN:\n            // Expect IME keyCode on each keydown. If we get any other\n            // code we must have exited earlier.\n            return nativeEvent.keyCode !== START_KEYCODE;\n        case TOP_KEY_PRESS:\n        case TOP_MOUSE_DOWN:\n        case TOP_BLUR:\n            // Events are not possible without cancelling IME.\n            return true;\n        default:\n            return false;\n    }\n}\n\n/**\n * Google Input Tools provides composition data via a CustomEvent,\n * with the `data` property populated in the `detail` object. If this\n * is available on the event object, use it. If not, this is a plain\n * composition event and we have nothing special to extract.\n *\n */\nfunction getDataFromCustomEvent(nativeEvent) {\n    const detail = nativeEvent.detail;\n    if (typeof detail === 'object' && 'data' in detail) {\n        return detail.data;\n    }\n    if (nativeEvent.data) {\n        return nativeEvent.data;\n    }\n    return null;\n}\n\n/**\n * Check if a composition event was triggered by Korean IME.\n * Our fallback mode does not work well with IE's Korean IME,\n * so just use native composition events when Korean IME is used.\n * Although CompositionEvent.locale property is deprecated,\n * it is available in IE, where our fallback mode is enabled.\n *\n */\nfunction isUsingKoreanIME(nativeEvent) {\n    return nativeEvent.locale === 'ko';\n}\n\n// Track the current IME composition status, if any.\nlet isComposing = false;\n\nfunction extractCompositionEvent(topLevelType, targetInst, nativeEvent, nativeEventTarget) {\n    let eventType;\n    let fallbackData;\n\n    if (canUseCompositionEvent) {\n        eventType = getCompositionEventType(topLevelType);\n    } else if (!isComposing) {\n        if (isFallbackCompositionStart(topLevelType, nativeEvent)) {\n            eventType = eventTypes.compositionStart;\n        }\n    } else if (isFallbackCompositionEnd(topLevelType, nativeEvent)) {\n        eventType = eventTypes.compositionEnd;\n    }\n\n    if (!eventType) {\n        return null;\n    }\n\n    if (useFallbackCompositionData && !isUsingKoreanIME(nativeEvent)) {\n        // The current composition is stored statically and must not be\n        // overwritten while composition continues.\n        if (!isComposing && eventType === eventTypes.compositionStart) {\n            isComposing = FallbackCompositionStateInitialize(nativeEventTarget);\n        } else if (eventType === eventTypes.compositionEnd) {\n            if (isComposing) {\n                fallbackData = FallbackCompositionStateGetData();\n            }\n        }\n    }\n\n    //   const event = SyntheticCompositionEvent.getPooled(\n    //     eventType,\n    //     targetInst,\n    //     nativeEvent,\n    //     nativeEventTarget\n    //   );\n    const beforeInputEvent = new BeforeInputEvent();\n    beforeInputEvent.nativeEvent = nativeEvent;\n\n    if (fallbackData) {\n        // Inject data generated from fallback path into the synthetic event.\n        // This matches the property of native CompositionEventInterface.\n        beforeInputEvent.data = fallbackData;\n    } else {\n        const customData = getDataFromCustomEvent(nativeEvent);\n        if (customData !== null) {\n            beforeInputEvent.data = customData;\n        }\n    }\n    return beforeInputEvent;\n    //   accumulateTwoPhaseDispatches(event);\n    //   return event;\n}\n\nfunction getNativeBeforeInputChars(topLevelType: any, nativeEvent) {\n    switch (topLevelType) {\n        case TOP_COMPOSITION_END:\n            if (HAS_TEXT_INPUT) {\n                HAS_TEXT_INPUT = false;\n                return;\n            }\n            return getDataFromCustomEvent(nativeEvent);\n        case TOP_KEY_PRESS:\n            /**\n             * If native `textInput` events are available, our goal is to make\n             * use of them. However, there is a special case: the spacebar key.\n             * In Webkit, preventing default on a spacebar `textInput` event\n             * cancels character insertion, but it *also* causes the browser\n             * to fall back to its default spacebar behavior of scrolling the\n             * page.\n             *\n             * Tracking at:\n             * https://code.google.com/p/chromium/issues/detail?id=355103\n             *\n             * To avoid this issue, use the keypress event as if no `textInput`\n             * event is available.\n             */\n            const which = nativeEvent.which;\n            if (which !== SPACEBAR_CODE) {\n                return null;\n            }\n\n            hasSpaceKeypress = true;\n            return SPACEBAR_CHAR;\n\n        case TOP_TEXT_INPUT:\n            // Record the characters to be added to the DOM.\n            const chars = nativeEvent.data;\n\n            // If it's a spacebar character, assume that we have already handled\n            // it at the keypress level and bail immediately. Android Chrome\n            // doesn't give us keycodes, so we need to ignore it.\n            if (chars === SPACEBAR_CHAR && hasSpaceKeypress) {\n                return null;\n            }\n\n            HAS_TEXT_INPUT = true;\n            return chars;\n\n        default:\n            // For other native event types, do nothing.\n            return null;\n    }\n}\n\n/**\n * For browsers that do not provide the `textInput` event, extract the\n * appropriate string to use for SyntheticInputEvent.\n *\n */\nfunction getFallbackBeforeInputChars(topLevelType: any, nativeEvent) {\n    // If we are currently composing (IME) and using a fallback to do so,\n    // try to extract the composed characters from the fallback object.\n    // If composition event is available, we extract a string only at\n    // compositionevent, otherwise extract it at fallback events.\n    if (isComposing) {\n        if (topLevelType === TOP_COMPOSITION_END || (!canUseCompositionEvent && isFallbackCompositionEnd(topLevelType, nativeEvent))) {\n            const chars = FallbackCompositionStateGetData();\n            FallbackCompositionStateReset();\n            isComposing = false;\n            return chars;\n        }\n        return null;\n    }\n\n    switch (topLevelType) {\n        case TOP_PASTE:\n            // If a paste event occurs after a keypress, throw out the input\n            // chars. Paste events should not lead to BeforeInput events.\n            return null;\n        case TOP_KEY_PRESS:\n            /**\n             * As of v27, Firefox may fire keypress events even when no character\n             * will be inserted. A few possibilities:\n             *\n             * - `which` is `0`. Arrow keys, Esc key, etc.\n             *\n             * - `which` is the pressed key code, but no char is available.\n             *   Ex: 'AltGr + d` in Polish. There is no modified character for\n             *   this key combination and no character is inserted into the\n             *   document, but FF fires the keypress for char code `100` anyway.\n             *   No `input` event will occur.\n             *\n             * - `which` is the pressed key code, but a command combination is\n             *   being used. Ex: `Cmd+C`. No character is inserted, and no\n             *   `input` event will occur.\n             */\n            if (!isKeypressCommand(nativeEvent)) {\n                // IE fires the `keypress` event when a user types an emoji via\n                // Touch keyboard of Windows.  In such a case, the `char` property\n                // holds an emoji character like `\\uD83D\\uDE0A`.  Because its length\n                // is 2, the property `which` does not represent an emoji correctly.\n                // In such a case, we directly return the `char` property instead of\n                // using `which`.\n                if (nativeEvent.char && nativeEvent.char.length > 1) {\n                    return nativeEvent.char;\n                } else if (nativeEvent.which) {\n                    return String.fromCharCode(nativeEvent.which);\n                }\n            }\n            return null;\n        case TOP_COMPOSITION_END:\n            return useFallbackCompositionData && !isUsingKoreanIME(nativeEvent) ? null : nativeEvent.data;\n        default:\n            return null;\n    }\n}\n\n/**\n * Extract a SyntheticInputEvent for `beforeInput`, based on either native\n * `textInput` or fallback behavior.\n *\n */\nfunction extractBeforeInputEvent(topLevelType, targetInst, nativeEvent, nativeEventTarget) {\n    let chars;\n\n    if (canUseTextInputEvent) {\n        chars = getNativeBeforeInputChars(topLevelType, nativeEvent);\n    } else {\n        chars = getFallbackBeforeInputChars(topLevelType, nativeEvent);\n    }\n\n    // If no characters are being inserted, no BeforeInput event should\n    // be fired.\n    if (!chars) {\n        return null;\n    }\n\n    const beforeInputEvent = new BeforeInputEvent();\n    beforeInputEvent.data = chars;\n    beforeInputEvent.nativeEvent = nativeEvent;\n    return beforeInputEvent;\n    //   const event = SyntheticInputEvent.getPooled(\n    //     eventTypes.beforeInput,\n    //     targetInst,\n    //     nativeEvent,\n    //     nativeEventTarget\n    //   );\n\n    //   event.data = chars;\n    //   accumulateTwoPhaseDispatches(event);\n    //   return event;\n}\n\n/**\n * Create an `onBeforeInput` event to match\n * http://www.w3.org/TR/2013/WD-DOM-Level-3-Events-20131105/#events-inputevents.\n *\n * This event plugin is based on the native `textInput` event\n * available in Chrome, Safari, Opera, and IE. This event fires after\n * `onKeyPress` and `onCompositionEnd`, but before `onInput`.\n *\n * `beforeInput` is spec'd but not implemented in any browsers, and\n * the `input` event does not provide any useful information about what has\n * actually been added, contrary to the spec. Thus, `textInput` is the best\n * available event to identify the characters that have actually been inserted\n * into the target node.\n *\n * This plugin is also responsible for emitting `composition` events, thus\n * allowing us to share composition fallback code for both `beforeInput` and\n * `composition` event types.\n */\nconst BeforeInputEventPlugin = {\n    //   eventTypes: eventTypes,\n\n    extractEvents: (topLevelType, targetInst, nativeEvent, nativeEventTarget) => {\n        const beforeInput = extractBeforeInputEvent(topLevelType, targetInst, nativeEvent, nativeEventTarget);\n        if (beforeInput === null) {\n            return null;\n        }\n        return beforeInput;\n    }\n};\n\nexport default BeforeInputEventPlugin;\n","import { Editor, Node, Mark, Document, Block, Inline, Annotation, Decoration } from 'slate';\nimport { ViewContainerRef, ComponentRef, ViewRef } from '@angular/core';\n\nexport class SlaLeafRenderConfig {\n    editor: Editor;\n    marks: any;\n    node: Node;\n    offset: number;\n    text: string;\n    children: any;\n    attributes: { [key: string]: string };\n    mark?: Mark;\n    decoration?: Decoration;\n    annotation?: Annotation;\n}\n\n/**\n * pluginRender parameter config\n */\nexport class SlaNodeRenderConfig {\n    editor: Editor;\n    node: Document | Block | Inline;\n    annotations?: any;\n    decorations?: any;\n    parent: Node;\n    isFocused: boolean;\n    isSelected: boolean;\n    readOnly: boolean;\n    children: any;\n    attributes: { [key: string]: string };\n    nodeViewContainerRef: ViewContainerRef;\n}\n\nexport class SlaNestedNodeRef {\n    constructor(\n        public rootNode: HTMLElement,\n        public componentRef: ComponentRef<any>\n    ) {}\n}\n","import { Node } from 'slate';\nexport abstract class ChildNodeBase {\n    rootNode: HTMLElement;\n    node: Node;\n}\n","export function getDomAttributesStringByObject(attributes: {\n    [key: string]: string;\n}) {\n    let attrString = '';\n    for (const key in attributes) {\n        if (attributes.hasOwnProperty(key)) {\n            const element = attributes[key];\n            attrString += `${key}=\"${element}\"`;\n        }\n    }\n    return attrString;\n}\n\nexport function setNodeAttributes(\n    ele: HTMLElement,\n    attributes: { [key: string]: string }\n) {\n    for (const key in attributes) {\n        if (attributes.hasOwnProperty(key)) {\n            ele.setAttribute(key, attributes[key]);\n        }\n    }\n}\n\nexport function setNodeStyles(\n    ele: HTMLElement,\n    styles: { [key: string]: string }\n) {\n    for (const key in styles) {\n        if (styles.hasOwnProperty(key)) {\n            ele.style[key] = styles[key];\n        }\n    }\n}\n","import {\n    Component,\n    Input,\n    OnInit,\n    ElementRef,\n    ViewContainerRef,\n    EmbeddedViewRef,\n    QueryList,\n    HostBinding\n} from '@angular/core';\nimport {\n    Document,\n    Selection,\n    PathUtils,\n    Node,\n    Editor,\n    Block,\n    Inline,\n    Decoration,\n    Annotation,\n    Text\n} from 'slate';\nimport { List, Map } from 'immutable';\nimport {\n    SlaNestedNodeRef,\n} from '../../core/render-plugin/render-config';\nimport DATA_ATTRS from '../../constants/data-attributes';\nimport { setNodeStyles, setNodeAttributes } from '../../utils/attributes';\n\n\n@Component({\n    selector: 'div[slaVoid]',\n    templateUrl: './void.component.html',\n})\nexport class SlaVoidComponent implements OnInit {\n\n    internalNode: any;\n\n    nodeComponentRef: SlaNestedNodeRef;\n\n    @Input()\n    editor: Editor;\n\n    @Input()\n    selection: Selection;\n\n    @Input()\n    parent: Document | Block | Inline;\n\n    @Input()\n    block: Block;\n\n    @Input()\n    decorations: List<Decoration>;\n\n    @Input()\n    annotations: Map<string, Annotation>;\n\n    @Input()\n    children: HTMLElement;\n\n    @Input()\n    nodeRef: (nodeRef: any) => {};\n\n    @Input()\n    readOnly = false;\n\n    @Input()\n    nodeRefs: QueryList<any>;\n\n    @Input()\n    set node(value: any) {\n        this.internalNode = value;\n        if (this.nodeComponentRef) {\n            this.nodeComponentRef.componentRef.instance.node = this.internalNode;\n        }\n    }\n\n    get node() {\n        return this.internalNode;\n    }\n\n    @HostBinding('attr.data-slate-void')\n    void = 'true';\n\n    @HostBinding('attr.data-key')\n    key = '';\n\n    constructor(\n        private viewContainerRef: ViewContainerRef,\n        private elementRef: ElementRef<any>\n    ) { }\n\n    ngOnInit() {\n        this.render();\n        this.key = this.node.key;\n        if (this.node.object === 'inline') {\n            this.elementRef.nativeElement.contentEditable = 'false';\n        }\n    }\n\n    createElement() {\n        const tag = this.node.object === 'block' ? 'div' : 'span';\n        return document.createElement(tag);\n    }\n\n    render() {\n        if (!this.readOnly) {\n            this.elementRef.nativeElement.appendChild(this.renderSpacer());\n        } else {\n            this.children.remove();\n        }\n        this.elementRef.nativeElement.appendChild(this.renderContent());\n    }\n\n    renderSpacer() {\n        const style = {\n            height: '0',\n            color: 'transparent',\n            outline: 'none',\n            position: 'absolute',\n        };\n        const spacerAttrs = {\n            [DATA_ATTRS.SPACER]: 'true',\n        };\n        const spacer = this.createElement();\n        setNodeStyles(spacer, style);\n        setNodeAttributes(spacer, spacerAttrs);\n        spacer.appendChild(this.nodeRefs.first.rootNode);\n        return spacer;\n    }\n\n    renderContent() {\n        const content = this.createElement();\n        content.setAttribute(`contentEditable`, this.readOnly ? null : 'false');\n        content.appendChild(this.children);\n        return content;\n    }\n\n}\n","import { Injectable, ComponentFactoryResolver, EmbeddedViewRef, ComponentRef, QueryList } from '@angular/core';\nimport { SlaNodeRenderConfig, SlaNestedNodeRef } from './render-config';\nimport { ComponentType } from '@angular/cdk/portal';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SlaPluginRenderService {\n    constructor(private cfr: ComponentFactoryResolver) {}\n    public renderDom(\n        tagName: string,\n        children: any,\n        attributes: { [key: string]: string },\n        styles?: { [key: string]: string }\n    ): HTMLElement {\n        const node = document.createElement(tagName);\n        this.setNodeAttributes(node, attributes);\n        if (styles) {\n            this.setNodeStyles(node, styles);\n        }\n\n        if (children instanceof HTMLCollection) {\n            for (let index = 0; index < children.length; index++) {\n                const element = children.item(index);\n                node.appendChild(element);\n            }\n            return node;\n        }\n        if (children instanceof HTMLElement) {\n            node.appendChild(children);\n            return node;\n        }\n        if (children instanceof QueryList) {\n            const nodeRefs = children.toArray();\n            for (const nodeRef of nodeRefs) {\n                node.appendChild(nodeRef.rootNode);\n            }\n            return node;\n        }\n        return node;\n    }\n\n    public renderComponent(componentType: ComponentType<any>, config: SlaNodeRenderConfig): SlaNestedNodeRef {\n        const componentFactory = this.cfr.resolveComponentFactory(componentType);\n        const componentRef = config.nodeViewContainerRef.createComponent(componentFactory);\n        Object.assign(componentRef.instance, { ...config });\n        componentRef.changeDetectorRef.detectChanges();\n        return new SlaNestedNodeRef(this.getComponentRootNode(componentRef), componentRef);\n    }\n\n    private setNodeAttributes(ele: HTMLElement, attributes: { [key: string]: string }) {\n        for (const key in attributes) {\n            if (attributes.hasOwnProperty(key)) {\n                ele.setAttribute(key, attributes[key]);\n            }\n        }\n    }\n\n    private setNodeStyles(ele: HTMLElement, styles: { [key: string]: string }) {\n        for (const key in styles) {\n            if (styles.hasOwnProperty(key)) {\n                ele.style[key] = styles[key];\n            }\n        }\n    }\n\n    private getComponentRootNode(componentRef: ComponentRef<any>): HTMLElement {\n        return (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n    }\n}\n","import {\n    Component,\n    Input,\n    SimpleChanges,\n    ViewChild,\n    OnChanges,\n    OnInit,\n    ElementRef,\n    TemplateRef,\n    ViewContainerRef,\n    ChangeDetectionStrategy,\n    OnDestroy,\n    QueryList,\n    ViewChildren,\n    forwardRef,\n    DoCheck,\n    AfterViewInit,\n    AfterViewChecked,\n    IterableDiffers,\n    IterableDiffer,\n    IterableChangeRecord,\n    NgIterable,\n    NgZone,\n    ComponentFactoryResolver\n} from '@angular/core';\nimport { Document, Selection, PathUtils, Node, Editor, Block, Inline, Decoration, Annotation, Text } from 'slate';\nimport { List, Map } from 'immutable';\nimport { SlaNodeRenderConfig, SlaNestedNodeRef } from '../../core/render-plugin/render-config';\nimport DATA_ATTRS from '../../constants/data-attributes';\nimport Debug from 'debug';\nimport { ChildNodeBase } from '../../core/child-node-base';\nimport warning from 'tiny-warning';\nimport { SlaVoidComponent } from '../void/void.component';\nimport { SlaPluginRenderService } from '../../core/render-plugin/plugin-render-service';\n\nconst debug = Debug('slate:node');\ndebug.render = Debug('slate:node-render');\ndebug.check = Debug('slate:docheck');\ndebug.change = Debug('slate:change');\n\nexport const nodeBinding: any = {\n    provide: ChildNodeBase,\n    useExisting: forwardRef(() => SlaNodeComponent)\n};\n\n@Component({\n    selector: 'sla-node,[slaNode]',\n    templateUrl: './node.component.html',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [nodeBinding]\n})\nexport class SlaNodeComponent extends ChildNodeBase implements OnInit, OnDestroy, OnChanges, AfterViewInit, DoCheck, AfterViewChecked {\n    internalNode: Block | Document | Inline;\n\n    descendantRootNodes: HTMLElement[];\n\n    rootNode: HTMLElement;\n\n    nodeComponentRef: SlaNestedNodeRef;\n\n    subSelections = [];\n\n    @Input()\n    editor: Editor;\n\n    @Input()\n    selection: Selection;\n\n    @Input()\n    block: Block;\n\n    @Input()\n    index: number;\n\n    @Input()\n    nodeRef: (nodeRef: any) => {};\n\n    @Input()\n    readOnly = false;\n\n    rendered = true;\n\n    @Input()\n    set node(value: Block | Inline | Document) {\n        debug('set: node', value.toJSON());\n        const oldNode = this.internalNode || value;\n        this.internalNode = value;\n        if (this.nodeComponentRef) {\n            this.ngZone.run(() => {\n                this.nodeComponentRef.componentRef.instance.node = this.internalNode;\n                this.nodeComponentRef.componentRef.changeDetectorRef.detectChanges();\n            });\n        } else {\n            if (!this.internalNode.data.equals(oldNode.data)) {\n                this.render();\n            }\n        }\n    }\n\n    get node() {\n        return this.internalNode;\n    }\n\n    @ViewChildren(ChildNodeBase)\n    nodeRefs: QueryList<ChildNodeBase>;\n\n    differ: IterableDiffer<ChildNodeBase>;\n\n    constructor(\n        private viewContainerRef: ViewContainerRef,\n        private elementRef: ElementRef<any>,\n        private slaPluginRenderService: SlaPluginRenderService,\n        private ngZone: NgZone,\n        private differs: IterableDiffers\n    ) {\n        super();\n    }\n\n    ngOnInit() {\n        debug(`ngOnInit node`, this.node.toJSON());\n        this.rootNode = this.elementRef.nativeElement;\n    }\n\n    ngAfterViewInit() {\n        this.render();\n        this.differ = this.differs.find(this.nodeRefs).create((index, item) => {\n            return item.rootNode;\n        });\n        this.differ.diff(this.nodeRefs as any);\n        this.nodeRefs.changes.subscribe(() => {\n            const iterableChanges = this.differ.diff(this.nodeRefs as any);\n            if (iterableChanges) {\n                iterableChanges.forEachAddedItem((record: IterableChangeRecord<ChildNodeBase>) => {\n                    const rootNode = record.item.rootNode;\n                    let childrenContent: HTMLElement;\n                    if (this.nodeComponentRef) {\n                        childrenContent = (this.nodeComponentRef.componentRef.instance as any).childrenContent.nativeElement;\n                    } else {\n                        childrenContent = this.rootNode;\n                    }\n                    const childNodes = Array.from(childrenContent.childNodes).filter((node) =>\n                        (node as HTMLElement).hasAttribute('data-slate-object') || (node as HTMLElement).hasAttribute('data-slate-void')\n                    );\n                    const nextNode = childNodes[record.currentIndex];\n                    if (nextNode) {\n                        childrenContent.insertBefore(rootNode, nextNode);\n                    } else {\n                        childrenContent.appendChild(rootNode);\n                    }\n                });\n            }\n        });\n    }\n\n    ngAfterViewChecked() {}\n\n    getRelativeRange(node, index, range) {\n        if (range.isUnset) {\n            return null;\n        }\n\n        const child = node.nodes.get(index);\n        let { start, end } = range;\n        const { path: startPath } = start;\n        const { path: endPath } = end;\n        const startIndex = startPath.first();\n        const endIndex = endPath.first();\n\n        if (startIndex === index) {\n            start = start.setPath(startPath.rest());\n        } else if (startIndex < index && index <= endIndex) {\n            if (child.object === 'text') {\n                start = start.moveTo(PathUtils.create([index]), 0).setKey(child.key);\n            } else {\n                const [first] = child.texts();\n                const [firstNode, firstPath] = first;\n                start = start.moveTo(firstPath, 0).setKey(firstNode.key);\n            }\n        } else {\n            start = null;\n        }\n\n        if (endIndex === index) {\n            end = end.setPath(endPath.rest());\n        } else if (startIndex <= index && index < endIndex) {\n            if (child.object === 'text') {\n                const length = child.text.length;\n                end = end.moveTo(PathUtils.create([index]), length).setKey(child.key);\n            } else {\n                const [last] = child.texts({ direction: 'backward' });\n                const [lastNode, lastPath] = last;\n                end = end.moveTo(lastPath, lastNode.text.length).setKey(lastNode.key);\n            }\n        } else {\n            end = null;\n        }\n\n        if (!start || !end) {\n            return null;\n        }\n\n        range = range.setAnchor(start);\n        range = range.setFocus(end);\n        return range;\n    }\n\n    trackBy(index, node: any) {\n        return `${node.key}_${node.type}`;\n    }\n\n    render() {\n        debug.render('exec render', this.node.toJSON());\n        let pluginRender;\n        if (this.node.object === 'block') {\n            pluginRender = 'renderBlock';\n        } else if (this.node.object === 'document') {\n            pluginRender = 'renderDocument';\n        } else if (this.node.object === 'inline') {\n            pluginRender = 'renderInline';\n        }\n        const config: SlaNodeRenderConfig = {\n            editor: this.editor,\n            isFocused: !!this.selection && this.selection.isFocused,\n            isSelected: !!this.selection,\n            node: this.node,\n            parent: null,\n            readOnly: this.readOnly,\n            children: this.nodeRefs,\n            attributes: {\n                [DATA_ATTRS.OBJECT]: this.node.object,\n                [DATA_ATTRS.KEY]: this.node.key\n            },\n            nodeViewContainerRef: this.viewContainerRef\n        };\n        const renderResult: HTMLElement | SlaNestedNodeRef = this.editor.run(pluginRender, config) as any;\n        let renderDom = null;\n        if (renderResult instanceof SlaNestedNodeRef) {\n            this.nodeComponentRef = renderResult;\n            renderDom = this.nodeComponentRef.rootNode;\n        } else {\n            renderDom = renderResult;\n        }\n        if ((this.editor as any).isVoid(this.node)) {\n            config.children = renderDom;\n            const voidRootNode = this.slaPluginRenderService.renderComponent(\n                SlaVoidComponent,\n                Object.assign(config, { nodeRefs: this.nodeRefs })\n            ).rootNode;\n            this.rootNode.replaceWith(voidRootNode);\n            this.rootNode = voidRootNode;\n        } else {\n            this.rootNode.replaceWith(renderDom);\n            this.rootNode = renderDom;\n        }\n    }\n\n    getNodeRef(index: number) {\n        if (!this.nodeRefs) {\n            warning(false, 'nodeRefs is undefined.');\n            return null;\n        }\n        return this.nodeRefs.find((item, i, array) => i === index);\n    }\n\n    ngOnChanges(simpleChanges: SimpleChanges) {\n        if (simpleChanges.node || simpleChanges.decorations || simpleChanges.annotations || simpleChanges.selection) {\n            this.memoSubNodes();\n        }\n        debug.change(`node changes`, simpleChanges);\n        const selectionChange = simpleChanges.selection;\n        if (selectionChange && !selectionChange.firstChange) {\n            if (this.nodeComponentRef) {\n                const isFocused = !!this.selection && this.selection.isFocused;\n                if (isFocused !== this.nodeComponentRef.componentRef.instance.isFocused) {\n                    this.ngZone.run(() => {\n                        this.nodeComponentRef.componentRef.instance.isFocused = isFocused;\n                        this.nodeComponentRef.componentRef.changeDetectorRef.detectChanges();\n                    });\n                }\n            }\n        }\n    }\n\n    ngDoCheck() {\n        debug.check('check node');\n    }\n\n    ngOnDestroy() {\n        debug(`ngOnDestroy node`);\n        this.rootNode.remove();\n    }\n\n    memoSubNodes() {\n        for (let i = 0; i < this.node.nodes.size; i++) {\n            const selection = this.selection && this.getRelativeRange(this.node, i, this.selection);\n            if (!(selection && selection.equals(this.subSelections[i]))) {\n                this.subSelections[i] = selection;\n            }\n        }\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { NGX_SLATE_EVENTS, NgxSlateEvent } from '../constants/event-handlers';\nimport { fromEvent, Subject, merge, Observable } from 'rxjs';\nimport { takeUntil, map } from 'rxjs/operators';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SlaEventService {\n    fromSlaEvents(element: HTMLElement, $destroy: Subject<any>): Observable<{ event: Event; eventEntity: NgxSlateEvent }> {\n        return merge(\n            ...NGX_SLATE_EVENTS.map((eventEntity: NgxSlateEvent) => {\n                return fromEvent(element, eventEntity.name).pipe(\n                    map(event => {\n                        return { event, eventEntity };\n                    })\n                );\n            })\n        ).pipe(takeUntil($destroy));\n    }\n}\n","import {\n    Component,\n    Input,\n    OnInit,\n    HostBinding,\n    HostListener,\n    ElementRef,\n    NgZone,\n    OnDestroy,\n    OnChanges,\n    AfterViewChecked,\n    AfterContentChecked,\n    SimpleChanges,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    ViewChild\n} from '@angular/core';\nimport Debug from 'debug';\nimport { Document, Selection, Value } from 'slate';\nimport { List } from 'immutable';\nimport { fromEvent, Subject, interval, timer } from 'rxjs';\nimport { debounceTime, take, takeUntil, throttle } from 'rxjs/operators';\nimport getWindow from 'get-window';\nimport Hotkeys from 'slate-hotkeys';\nimport warning from 'tiny-warning';\n\nimport { IS_ANDROID, IS_FIREFOX, HAS_INPUT_EVENTS_LEVEL_2 } from 'slate-dev-environment';\nimport SELECTORS from '../../constants/selectors';\nimport removeAllRanges from '../../utils/remove-all-ranges';\nimport scrollToSelection from '../../utils/scroll-to-selection';\nimport BeforeInputEventPlugin from '../../plugins/custom-event/BeforeInputEventPlugin';\nimport { SlaNodeComponent } from '../node/node.component';\nimport { SlaEventService } from '../../core/event-service';\n\nconst FIREFOX_NODE_TYPE_ACCESS_ERROR = /Permission denied to access property \"nodeType\"/;\n//#region\nconst SPACEBAR_CODE = 32;\nconst SPACEBAR_CHAR = String.fromCharCode(SPACEBAR_CODE);\n//#endregion\n\nconst debug = Debug('slate:content');\n\ndebug.update = Debug('slate:update');\n\ndebug.render = Debug('slate:content-render');\n\ndebug.track = Debug('slate:track');\n\n@Component({\n    selector: 'sla-content,[slaContent]',\n    templateUrl: './content.component.html',\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SlaContentComponent implements OnInit, OnDestroy, AfterViewChecked {\n    @ViewChild(SlaNodeComponent, { static: true })\n    nodeRef: SlaNodeComponent;\n\n    $destroy: Subject<any> = new Subject();\n\n    rootNode: HTMLElement;\n\n    hasSpaceKeypress = false;\n\n    isComposing = false;\n\n    isUpdateSelection = false;\n\n    document: Document;\n\n    selection: Selection;\n\n    editorData: Value;\n\n    @Input()\n    readOnly = false;\n\n    @Input()\n    set slaValue(value: Value) {\n        this.isUpdateSelection = true;\n        debug.render('set: slateValue');\n        this.editorData = value;\n    }\n\n    @Input()\n    editor: any;\n\n    @Input()\n    slaEvent: (handle: string, event: any) => {};\n\n    tmp = {\n        isUpdatingSelection: false,\n        contentKey: 0\n    };\n\n    constructor(\n        public ngZone: NgZone,\n        private elementRef: ElementRef,\n        private cdr: ChangeDetectorRef,\n        private slaEventService: SlaEventService\n    ) {}\n\n    ngOnInit() {\n        this.rootNode = this.elementRef.nativeElement;\n        this.document = this.editor.value.document;\n        this.selection = this.editor.value.selection;\n        this.ngZone.runOutsideAngular(() => {\n            this.slaEventService.fromSlaEvents(this.rootNode, this.$destroy).subscribe(({ event, eventEntity }) => {\n                const target: any = event.target;\n                if (target && target.closest) {\n                    const isSkip = target.closest(SELECTORS.SKIP_EVENT);\n                    if (isSkip) {\n                        return;\n                    }\n                }\n                if (eventEntity.isTriggerBeforeInput) {\n                    const beforeInputEvent = BeforeInputEventPlugin.extractEvents(event.type, null, event, event.target);\n                    if (beforeInputEvent) {\n                        this.onEventHandle('onBeforeInput', beforeInputEvent);\n                    }\n                }\n                if (eventEntity.handler) {\n                    this.onEventHandle(eventEntity.handler, event);\n                }\n            });\n            fromEvent(window.document, 'selectionchange')\n                .pipe(\n                    throttle(\n                        (value: Event) => {\n                            return interval(100);\n                        },\n                        { trailing: true, leading: true }\n                    ),\n                    takeUntil(this.$destroy)\n                )\n                .subscribe((event: any) => {\n                    this.onNativeSelectionChange(event);\n                });\n\n            // if (HAS_INPUT_EVENTS_LEVEL_2) {\n            //     fromEvent(this.rootNode, 'beforeinput')\n            //         .pipe(takeUntil(this.$destroy))\n            //         .subscribe(event => {\n            //             this.onEventHandle('onBeforeInput', event);\n            //         });\n            // }\n        });\n    }\n\n    onEventHandle(handler, event) {\n        debug('slaEvent', handler);\n\n        const nativeEvent = event.nativeEvent || event;\n        const isUndoRedo = event.type === 'keydown' && (Hotkeys.isUndo(nativeEvent) || Hotkeys.isRedo(nativeEvent));\n\n        // Ignore `onBlur`, `onFocus` and `onSelect` events generated\n        // programmatically while updating selection.\n        if ((this.tmp.isUpdatingSelection || isUndoRedo) && (handler === 'onSelect' || handler === 'onBlur' || handler === 'onFocus')) {\n            return;\n        }\n\n        // COMPAT: There are situations where a select event will fire with a new\n        // native selection that resolves to the same internal position. In those\n        // cases we don't need to trigger any changes, since our internal model is\n        // already up to date, but we do want to update the native selection again\n        // to make sure it is in sync. (2017/10/16)\n        //\n        // ANDROID: The updateSelection causes issues in Android when you are\n        // at the end of a block. The selection ends up to the left of the inserted\n        // character instead of to the right. This behavior continues even if\n        // you enter more than one character. (2019/01/03)\n        if (!IS_ANDROID && handler === 'onSelect') {\n            // const { editor } = this.props;\n            const { value } = this.editor;\n            const { selection } = value;\n            const window = getWindow(event.target);\n            const domSelection = window.getSelection();\n            const range = this.editor.findRange(domSelection);\n\n            if (range && range.equals(selection.toRange())) {\n                this.updateSelection();\n                return;\n            }\n        }\n\n        // Don't handle drag and drop events coming from embedded editors.\n        if (\n            handler === 'onDragEnd' ||\n            handler === 'onDragEnter' ||\n            handler === 'onDragExit' ||\n            handler === 'onDragLeave' ||\n            handler === 'onDragOver' ||\n            handler === 'onDragStart' ||\n            handler === 'onDrop'\n        ) {\n            const closest = event.target.closest(SELECTORS.EDITOR);\n\n            if (closest !== this.rootNode) {\n                return;\n            }\n        }\n\n        // Some events require being in editable in the editor, so if the event\n        // target isn't, ignore them.\n        if (\n            handler === 'onBeforeInput' ||\n            handler === 'onBlur' ||\n            handler === 'onCompositionEnd' ||\n            handler === 'onCompositionStart' ||\n            handler === 'onCopy' ||\n            handler === 'onCut' ||\n            handler === 'onFocus' ||\n            handler === 'onInput' ||\n            handler === 'onKeyDown' ||\n            handler === 'onKeyUp' ||\n            handler === 'onPaste' ||\n            handler === 'onSelect'\n        ) {\n            const target = event.target ? event.target : event.nativeEvent.target;\n            if (!this.isInEditor(target)) {\n                return;\n            }\n        }\n\n        this.slaEvent(handler, event);\n    }\n\n    onNativeSelectionChange(event: any) {\n        if (this.readOnly) {\n            return;\n        }\n\n        const window = getWindow(event.target);\n        const { activeElement } = window.document;\n\n        debug.update('onNativeSelectionChange', {\n            anchorOffset: window.getSelection().anchorOffset\n        });\n\n        if (activeElement !== this.rootNode) {\n            return;\n        }\n\n        this.slaEvent('onSelect', event);\n    }\n\n    ngOnDestroy(): void {\n        this.$destroy.next();\n        this.$destroy.complete();\n    }\n\n    /**\n     * Update the native DOM selection to reflect the internal model.\n     */\n\n    updateSelection() {\n        const { value } = this.editor;\n        const { selection } = value;\n        const { isBackward } = selection;\n        const window = getWindow(this.rootNode);\n        const native = window.getSelection();\n        const { activeElement } = window.document;\n\n        if (debug.update.enabled) {\n            debug.update('updateSelection', { selection: selection.toJSON() });\n        }\n\n        // COMPAT: In Firefox, there's a but where `getSelection` can return `null`.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=827585 (2018/11/07)\n        if (!native) {\n            return;\n        }\n\n        const { rangeCount, anchorNode } = native;\n        let updated = false;\n\n        // If the Slate selection is blurred, but the DOM's active element is still\n        // the editor, we need to blur it.\n        if (selection.isBlurred && activeElement === this.rootNode) {\n            this.rootNode.blur();\n            updated = true;\n        }\n\n        // If the Slate selection is unset, but the DOM selection has a range\n        // selected in the editor, we need to remove the range.\n        if (selection.isUnset && rangeCount && this.isInEditor(anchorNode)) {\n            // removeAllRanges(native);\n            updated = true;\n        }\n\n        // If the Slate selection is focused, but the DOM's active element is not\n        // the editor, we need to focus it. We prevent scrolling because we handle\n        // scrolling to the correct selection.\n        if (selection.isFocused && activeElement !== this.rootNode) {\n            this.rootNode.focus({ preventScroll: true });\n            updated = true;\n        }\n\n        // Otherwise, figure out which DOM nodes should be selected...\n        if (selection.isFocused && selection.isSet) {\n            const current = !!native.rangeCount && native.getRangeAt(0);\n            const range: Range = (this.editor as any).findDOMRange(selection) as any;\n\n            if (!range) {\n                warning(false, 'Unable to find a native DOM range from the current selection.');\n\n                return;\n            }\n\n            const { startContainer, startOffset, endContainer, endOffset } = range;\n\n            // If the new range matches the current selection, there is nothing to fix.\n            // COMPAT: The native `Range` object always has it's \"start\" first and \"end\"\n            // last in the DOM. It has no concept of \"backwards/forwards\", so we have\n            // to check both orientations here. (2017/10/31)\n            if (current) {\n                if (\n                    (startContainer === current.startContainer &&\n                        startOffset === current.startOffset &&\n                        endContainer === current.endContainer &&\n                        endOffset === current.endOffset) ||\n                    (startContainer === current.endContainer &&\n                        startOffset === current.endOffset &&\n                        endContainer === current.startContainer &&\n                        endOffset === current.startOffset)\n                ) {\n                    return;\n                }\n            }\n\n            // Otherwise, set the `isUpdatingSelection` flag and update the selection.\n            updated = true;\n            this.tmp.isUpdatingSelection = true;\n\n            // removeAllRanges(native);\n\n            // COMPAT: IE 11 does not support `setBaseAndExtent`. (2018/11/07)\n            if (native.setBaseAndExtent) {\n                // COMPAT: Since the DOM range has no concept of backwards/forwards\n                // we need to check and do the right thing here.\n                if (isBackward) {\n                    native.setBaseAndExtent(range.endContainer, range.endOffset, range.startContainer, range.startOffset);\n                } else {\n                    native.setBaseAndExtent(range.startContainer, range.startOffset, range.endContainer, range.endOffset);\n                }\n            } else {\n                native.addRange(range);\n            }\n\n            debug.track('track end : updateSelection');\n\n            // Scroll to the selection, in case it's out of view.\n            scrollToSelection(native);\n\n            // // Then unset the `isUpdatingSelection` flag after a delay.\n            setTimeout(() => {\n                // COMPAT: In Firefox, it's not enough to create a range, you also need\n                // to focus the contenteditable element too. (2016/11/16)\n                if (IS_FIREFOX && this.rootNode) {\n                    this.rootNode.focus();\n                }\n\n                this.tmp.isUpdatingSelection = false;\n\n                debug.update('updateSelection:setTimeout', {\n                    anchorOffset: window.getSelection().anchorOffset\n                });\n            });\n\n            if (updated && (debug.enabled || debug.update.enabled)) {\n                debug('updateSelection', { selection, native, activeElement });\n\n                debug.update('updateSelection:applied', {\n                    selection: selection.toJSON(),\n                    native: {\n                        anchorOffset: native.anchorOffset,\n                        focusOffset: native.focusOffset\n                    }\n                });\n            }\n        }\n    }\n\n    isInEditor(target) {\n        let el;\n\n        try {\n            // COMPAT: Text nodes don't have `isContentEditable` property. So, when\n            // `target` is a text node use its parent node for check.\n            el = target.nodeType === 3 ? target.parentNode : target;\n        } catch (err) {\n            // COMPAT: In Firefox, `target.nodeType` will throw an error if target is\n            // originating from an internal \"restricted\" element (e.g. a stepper\n            // arrow on a number input)\n            // see github.com/ianstormtaylor/slate/issues/1819\n            if (IS_FIREFOX && FIREFOX_NODE_TYPE_ACCESS_ERROR.test(err.message)) {\n                return false;\n            }\n\n            throw err;\n        }\n\n        return el.isContentEditable && (el === this.rootNode || el.closest(SELECTORS.EDITOR) === this.rootNode);\n    }\n\n    ngAfterViewChecked() {\n        if (this.isUpdateSelection) {\n            this.isUpdateSelection = false;\n            this.ngZone.runOutsideAngular(() => {\n                this.updateSelection();\n            });\n        }\n    }\n}\n","import { SlaNodeRenderConfig } from '../../core/render-plugin/render-config';\nimport { SlaPluginRenderService } from '../../core/render-plugin/plugin-render-service';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class Rendering {\n    constructor(private slaPluginRenderService: SlaPluginRenderService) {}\n\n    renderBlock = (config: SlaNodeRenderConfig) => {\n        return this.slaPluginRenderService.renderDom('div', config.children, config.attributes, { position: 'relative' });\n    };\n\n    renderDocument = (config: SlaNodeRenderConfig) => {\n        return this.slaPluginRenderService.renderDom('div', config.children, config.attributes);\n    };\n\n    renderInline = (config: SlaNodeRenderConfig) => {\n        return this.slaPluginRenderService.renderDom('span', config.children, config.attributes);\n    };\n}\n","import {\n    Component,\n    OnInit,\n    ViewEncapsulation,\n    Renderer2,\n    ElementRef,\n    NgZone,\n    Input,\n    Output,\n    EventEmitter,\n    ViewChild\n} from '@angular/core';\nimport { Editor, Plugin } from 'slate';\nimport AngularPlugin from '../../plugins/angular/index';\nimport { SlaContentComponent } from '../content/content.component';\nimport { ValueChange } from '../../core/value-change';\nimport { Rendering } from '../../plugins/angular/rendering';\n\n@Component({\n    selector: 'sla-editor,[slaEditor]',\n    templateUrl: './editor.component.html'\n})\nexport class SlaEditorComponent implements OnInit {\n    editor: Editor;\n\n    @Input()\n    slaValue: any;\n\n    @Input()\n    slaReadOnly: boolean;\n\n    @Input()\n    slaPlaceholder: string;\n\n    @Input()\n    spellcheck = false;\n\n    @Input()\n    tabIndex: number;\n\n    @Input()\n    slaContainerClass;\n\n    @Input()\n    plugins: Plugin[] = [];\n\n    @Input()\n    commands: any;\n\n    @Input()\n    queries: any;\n\n    @Input()\n    schema: any;\n\n    @Input()\n    decorateNode: () => {};\n\n    @Input()\n    renderAnnotation: () => {};\n\n    @Input()\n    renderBlock: () => {};\n\n    @Input()\n    renderDecoration: () => {};\n\n    @Input()\n    renderDocument: () => {};\n\n    @Input()\n    renderEditor: () => {};\n\n    @Input()\n    renderInline: () => {};\n\n    @Input()\n    renderMark: () => {};\n\n    @Input()\n    onBeforeInput: () => {};\n\n    @Input()\n    onBlur: () => {};\n\n    @Input()\n    onClick: () => {};\n\n    @Input()\n    onContextMenu: () => {};\n\n    @Input()\n    onCompositionEnd: () => {};\n\n    @Input()\n    onCompositionStart: () => {};\n\n    @Input()\n    onCopy: () => {};\n\n    @Input()\n    onCut: () => {};\n\n    @Input()\n    onDragEnd: () => {};\n\n    @Input()\n    onDragEnter: () => {};\n\n    @Input()\n    onDragLeave: () => {};\n\n    @Input()\n    onDragOver: () => {};\n\n    @Input()\n    onDragStart: () => {};\n\n    @Input()\n    onDrop: () => {};\n\n    @Input()\n    onInput: () => {};\n\n    @Input()\n    onFocus: () => {};\n\n    @Input()\n    onKeyDown: () => {};\n\n    @Input()\n    onKeyUp: () => {};\n\n    @Input()\n    onMouseDown: () => {};\n\n    @Input()\n    onMouseUp: () => {};\n\n    @Input()\n    onPaste: () => {};\n\n    @Input()\n    onSelect: () => {};\n\n    @Output()\n    slaOnChange: EventEmitter<ValueChange> = new EventEmitter<ValueChange>();\n\n    @Output()\n    slaEditorInitComplete: EventEmitter<Editor> = new EventEmitter<Editor>();\n\n    @ViewChild(SlaContentComponent, { static: true })\n    contentRef: SlaContentComponent;\n\n    tmp = {\n        mounted: false,\n        change: null,\n        resolves: 0,\n        updates: 0,\n        contentRef: null\n    };\n\n    constructor(\n        private ngZone: NgZone,\n        private render2: Renderer2,\n        private element: ElementRef,\n        private rendering: Rendering\n    ) {}\n\n    ngOnInit() {\n        this.setEditorContainerClass();\n        const { slaValue: value, slaReadOnly: readOnly } = this;\n        this.ngZone.runOutsideAngular(() => {\n            const angularPlugins = AngularPlugin(this);\n\n            const onChange = (change: ValueChange) => {\n                // if (this.tmp.mounted) {\n                //     this.slaOnChange.emit(change);\n                // } else {\n                //     this.tmp.change = change;\n                // }\n                this.slaOnChange.emit(change);\n            };\n\n            this.editor = new Editor({\n                plugins: [...angularPlugins, this.rendering],\n                onChange,\n                value,\n                readOnly\n            });\n            (this.editor as any).tmp.contentRef = this.contentRef;\n            this.slaEditorInitComplete.emit(this.editor);\n        });\n    }\n\n    slaEvent(handler: string, event: Event) {\n        this.editor.run(handler, event);\n    }\n\n    private setEditorContainerClass() {\n        const classList = ['sla-editor-container'];\n        if (this.slaContainerClass) {\n            classList.push(this.slaContainerClass);\n        }\n        this.element.nativeElement.classList.add(...classList);\n    }\n}\n","/**\n * Offset key parser regex.\n *\n * @type {RegExp}\n */\n\nconst PARSER = /^([\\w-]+)(?::(\\d+))?$/;\n\n/**\n * Parse an offset key `string`.\n *\n * @param {String} string\n * @return {Object}\n */\n\nfunction parse(value: string) {\n    const matches = PARSER.exec(value);\n\n    if (!matches) {\n        throw new Error(`Invalid offset key string \"${value}\".`);\n    }\n\n    const [original, key, index] = matches; // eslint-disable-line no-unused-vars\n    return {\n        key,\n        index: parseInt(index, 10)\n    };\n}\n\n/**\n * Stringify an offset key `object`.\n *\n * @param {Object} object\n *   @property {String} key\n *   @property {Number} index\n * @return {String}\n */\n\nfunction stringify(object) {\n    return `${object.key}:${object.index}`;\n}\n\n/**\n * Export.\n *\n * @type {Object}\n */\n\nexport default {\n    parse,\n    stringify\n};\n","import {\n    Component,\n    OnInit,\n    Input,\n    ElementRef,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    forwardRef,\n    NgZone,\n    OnChanges,\n    SimpleChange,\n    SimpleChanges,\n    DoCheck,\n    ViewChild\n} from '@angular/core';\nimport { Node, Editor, Block, Decoration, Text, Leaf, Annotation, Mark } from 'slate';\nimport { List, Map } from 'immutable';\nimport Debug from 'debug';\nimport { ChildNodeBase } from '../../core/child-node-base';\nimport DATA_ATTRS from '../../constants/data-attributes';\nimport OffsetKey from '../../utils/offset-key';\nimport { SlaLeafRenderConfig } from '../../core/render-plugin/render-config';\nimport SELECTORS from '../../constants/selectors';\n\n\nconst debug = Debug('slate:text');\ndebug.check = Debug('slate:docheck');\n\nexport const textBinding: any = {\n    provide: ChildNodeBase,\n    useExisting: forwardRef(() => SlaTextComponent)\n};\n\n@Component({\n    selector: 'sla-text,[slaText]',\n    templateUrl: './text.component.html',\n    providers: [textBinding],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SlaTextComponent extends ChildNodeBase\n    implements OnInit, OnChanges, DoCheck {\n    rootNode: HTMLElement;\n\n    lastContentElement: HTMLElement;\n\n    node: Text;\n\n    leaves: List<any>;\n\n    offsets = [];\n\n    @Input()\n    editor: Editor;\n\n    @Input()\n    parent: Node;\n\n    @Input()\n    block: Block;\n\n    @Input()\n    set slaTextNode(value: Text) {\n        debug('set: slaTextNode', value.toJSON());\n        if (this.leafContainer && this.node && this.node.marks && !this.node.marks.equals(value.marks)) {\n            this.node = value;\n            this.detectTextTemplate();\n            this.renderLeaf();\n        } else {\n            this.node = value;\n            this.detectTextTemplate();\n        }\n    }\n\n    get slaTextNode() {\n        return this.node;\n    }\n\n    offsetKey;\n\n    isZeroWidthString: boolean;\n\n    zeroWidthStringLength = 0;\n\n    isLineBreak = false;\n\n    isTrailing = false;\n\n    @ViewChild('leaf', { static: true })\n    leafContainer: ElementRef;\n\n    constructor(\n        private elementRef: ElementRef,\n        private cdr: ChangeDetectorRef,\n        private ngZone: NgZone\n    ) {\n        super();\n    }\n\n    ngOnInit() {\n        debug('ngOnInit');\n        this.offsetKey = OffsetKey.stringify({\n            key: this.node.key,\n            index: 0\n        });\n        this.rootNode = this.elementRef.nativeElement;\n        this.detectTextTemplate();\n        this.renderLeaf();\n    }\n\n    ngOnChanges(simpleChanges: SimpleChanges) {\n    }\n\n\n\n    renderLeaf() {\n        // COMPAT: Having the `data-` attributes on these leaf elements ensures that\n        // in certain misbehaving browsers they aren't weirdly cloned/destroyed by\n        // contenteditable behaviors. (2019/05/08)\n        let contentElement = this.leafContainer.nativeElement;\n        this.node.marks.forEach(mark => {\n            const markConfig = this.buildConfig(\n                {\n                    [DATA_ATTRS.OBJECT]: 'mark'\n                },\n                contentElement,\n                null,\n                null,\n                mark\n            );\n            const ret: any = this.editor.run('renderMark', markConfig);\n\n            if (ret) {\n                contentElement = ret;\n            }\n        });\n        if (this.lastContentElement && this.lastContentElement !== this.leafContainer.nativeElement) {\n            this.lastContentElement.remove();\n        }\n        this.elementRef.nativeElement.appendChild(contentElement);\n        this.lastContentElement = contentElement;\n    }\n\n    detectTextTemplate() {\n        this.isZeroWidthString = false;\n        this.zeroWidthStringLength = 0;\n        this.isLineBreak = false;\n        this.isTrailing = false;\n        if (this.editor.query('isVoid', this.parent)) {\n            this.zeroWidthStringLength = this.parent.text.length;\n            this.setZeroWidthElement();\n        } else if (\n            this.node.text === '' &&\n            this.parent.object === 'block' &&\n            this.parent.text === '' &&\n            this.parent.nodes.last() === this.node\n        ) {\n            this.isLineBreak = true;\n            this.setZeroWidthElement();\n        } else if (this.node.text === '') {\n            this.setZeroWidthElement();\n        } else {\n            const lastChar = this.node.text.charAt(this.node.text.length - 1);\n            if (lastChar === '\\n') {\n                this.isTrailing = true;\n            } else {\n                this.isTrailing = false;\n            }\n        }\n    }\n\n    // remove dom when isZeroWidthString = true\n    // because dom still exist when content component exec updateSelection\n    private setZeroWidthElement() {\n        this.isZeroWidthString = true;\n        const text = (this.leafContainer.nativeElement as HTMLElement).querySelector(`${SELECTORS.STRING}`);\n        if (text) {\n            text.remove();\n        }\n    }\n\n    buildConfig(\n        attributes: { [key: string]: string },\n        children: HTMLElement,\n        annotation?: Annotation,\n        decoration?: Decoration,\n        mark?: Mark\n    ) {\n        const renderProps: SlaLeafRenderConfig = {\n            editor: this.editor,\n            marks: this.node.marks,\n            node: this.node,\n            offset: 0,\n            text: this.node.text,\n            children,\n            attributes,\n            annotation,\n            decoration,\n            mark\n        };\n        return renderProps;\n    }\n\n    ngDoCheck() {\n        debug.check('check text', this.node);\n    }\n}\n","import { NgModule, ApplicationRef, ComponentFactoryResolver, Injector } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { PortalModule } from '@angular/cdk/portal';\nimport { SlaEditorComponent } from './components/editor/editor.component';\nimport { SlaContentComponent } from './components/content/content.component';\nimport { SlaNodeComponent } from './components/node/node.component';\nimport { SlaTextComponent } from './components/text/text.component';\nimport { SlaVoidComponent } from './components/void/void.component';\nimport { Rendering } from './plugins/angular/rendering';\n\n@NgModule({\n    declarations: [SlaEditorComponent, SlaContentComponent, SlaNodeComponent, SlaVoidComponent, SlaTextComponent],\n    imports: [BrowserModule, PortalModule],\n    exports: [SlaEditorComponent, SlaContentComponent, SlaNodeComponent, SlaTextComponent, SlaVoidComponent],\n    entryComponents: [SlaTextComponent, SlaVoidComponent],\n    providers: [Rendering]\n})\nexport class SlaEditorModule {\n    constructor() {}\n}\n","import { Operation, Value } from 'slate';\nimport { List } from 'immutable';\n\nexport class ValueChange {\n    operations: List<Operation>;\n    value: Value;\n}\n","import { ViewChild, Input, ViewContainerRef, SimpleChanges, ElementRef, QueryList } from '@angular/core';\nimport { Editor, Block, Node } from 'slate';\n\nexport class SlaPluginComponentBase {\n    @Input()\n    editor: Editor;\n\n    @Input()\n    node: Block;\n\n    @Input()\n    parent: Node;\n\n    @Input()\n    isFocused: boolean;\n\n    @Input()\n    isSelected: boolean;\n\n    @Input()\n    readOnly: boolean;\n\n    @Input()\n    children: QueryList<any>;\n\n    @Input()\n    attributes: { [key: string]: string };\n\n    @Input()\n    nodeViewContainerRef: ViewContainerRef;\n\n    @ViewChild('childrenContent', { read: ElementRef, static: true })\n    childrenContent: ElementRef;\n\n    constructor(public elementRef: ElementRef) {\n    }\n\n    initPluginComponent() {\n        this.insertChildrenView();\n        this.setNodeAttributes(this.elementRef.nativeElement, this.attributes);\n    }\n\n    getData(key) {\n        return this.node.data.get(key);\n    }\n\n    isNodeChange(changes: SimpleChanges): boolean {\n        const node = changes.node;\n        if (node && !node.isFirstChange) {\n            return true;\n        }\n        return false;\n    }\n\n    updateHostClass(classMap: { [key: string]: boolean }) {\n        for (const key in classMap) {\n            if (classMap.hasOwnProperty(key)) {\n                const value = classMap[key];\n                const classList = (this.elementRef.nativeElement as HTMLElement).classList;\n                if (value) {\n                    if (!classList.contains(key)) {\n                        classList.add(key);\n                    }\n                } else {\n                    if (classList.contains(key)) {\n                        classList.remove(key);\n                    }\n                }\n            }\n        }\n    }\n\n    setNodeAttributes(ele: HTMLElement, attributes: { [key: string]: string }) {\n        for (const key in attributes) {\n            if (attributes.hasOwnProperty(key)) {\n                ele.setAttribute(key, attributes[key]);\n            }\n        }\n    }\n\n    private insertChildrenView() {\n        if (this.childrenContent) {\n            const nodeRefs = this.children.toArray();\n            for (const nodeRef of nodeRefs) {\n                this.childrenContent.nativeElement.appendChild(nodeRef.rootNode);\n            }\n        }\n    }\n\n    removeNode(event) {\n        event.preventDefault();\n        const path = this.editor.value.document.getPath(this.node.key);\n        let focusNode = this.editor.value.document.getPreviousBlock(path);\n        if (!focusNode) {\n            focusNode = this.editor.value.document.getNextBlock(path);\n        }\n        this.editor.focus().moveToEndOfNode(focusNode);\n        this.editor.removeNodeByKey(this.node.key);\n    }\n}\n","import { Node } from 'slate';\nimport warning from 'tiny-warning';\n\nimport DATA_ATTRS from '../constants/data-attributes';\n\nfunction findDOMNode(key, win = window) {\n    warning(\n        false,\n        'As of slate-react@0.22 the `findDOMNode(key)` helper is deprecated in favor of `editor.findDOMNode(path)`.'\n    );\n\n    if ((Node as any).isNode(key)) {\n      key = key.key;\n    }\n\n    const el = win.document.querySelector(`[${DATA_ATTRS.KEY}=\"${key}\"]`);\n\n    if (!el) {\n        throw new Error(\n            `Unable to find a DOM node for \"${key}\". This is often because of forgetting to add \\`props.attributes\\` to a custom component.`\n        );\n    }\n\n    return el;\n}\n\nexport default findDOMNode;\n","/*\n * Public API Surface of ngx-slate-angular\n */\n\nexport * from './components';\nexport * from './editor.module';\nexport * from './core';\nexport * from './utils';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {SlaContentComponent as Éµb} from './components/content/content.component';\nexport {SlaEditorComponent as Éµa} from './components/editor/editor.component';\nexport {SlaNodeComponent as Éµd,nodeBinding as Éµc} from './components/node/node.component';\nexport {SlaTextComponent as Éµk,textBinding as Éµj} from './components/text/text.component';\nexport {SlaVoidComponent as Éµi} from './components/void/void.component';\nexport {ChildNodeBase as Éµe} from './core/child-node-base';\nexport {SlaEventService as Éµg} from './core/event-service';\nexport {SlaPluginRenderService as Éµf} from './core/render-plugin/plugin-render-service';\nexport {Rendering as Éµh} from './plugins/angular/rendering';"],"names":["FRAGMENT","HTML","TEXT","tslib_1.__values","debug","CommandsPlugin","QueriesPlugin","FallbackCompositionStateGetData","FallbackCompositionStateReset","tslib_1.__extends"],"mappings":"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"}
